
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>37. Case Study: Olympic medals &#8212; Data Science - A practical Approach</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e8f53015daec13862f6db5e763c41738.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="38. Case Study: User survey" href="UserSurvey.html" />
    <link rel="prev" title="36. Case Study: Churn" href="Churn.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      <h1 class="site-logo" id="site-title">Data Science - A practical Approach</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../foreword.html">
   Foreword
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  1. Introduction
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c1_introduction/introduction.html">
   1. Introduction
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  2. Data Preparation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/introduction.html">
   2. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/missing_data.html">
   3. Missing Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/concatenation_deduplication.html">
   4. Concatenation and deduplication
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/outliers.html">
   5. Outliers and validity
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/string_operations.html">
   6. String operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/datetime_operations.html">
   7. Datetime operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/categorical_encoding.html">
   8. Categorical encoding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/scaling_normalization.html">
   10. Scaling and Normalization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/binning_ranking.html">
   11. Binning and ranking
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c2_data_preparation/some_practice.html">
   12. Some practice
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  3. Data Preprocessing
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/introduction.html">
   13. Data Preprocessing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/indexing_slicing.html">
   14. Indexing and slicing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/merge.html">
   15. Merge
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/groupby.html">
   16. Groupby
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/pivot.html">
   17. Pivot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c3_data_preprocessing/sql_integration.html">
   18. Using SQL
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  4. Data Visualisation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/introduction.html">
   19. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/line.html">
   20. Line plot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/histogram.html">
   21. Histogram plot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/box.html">
   22. Box plot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/scatter.html">
   23. Scatter plot
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c4_data_visualisation/heatmap.html">
   24. Heatmap plot
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  5. Data Exploration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/introduction.html">
   25. Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/variable_identification.html">
   26. Variable identification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/univariate_analysis.html">
   27. Uni-variate analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/bivariate_analysis.html">
   28. Bi-variate analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/external_data.html">
   29. New Data Sources
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/feature_engineering.html">
   30. Feature Enhancing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/cluster_analysis.html">
   31. Cluster analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/variance_inflation.html">
   32. VIF: Variance Inflation Factor
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../c5_data_exploration/principle_component_analysis.html">
   33. Principle Component Analysis
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  6. Machine Learning
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../c6_machine_learning/introduction.html">
   34. Machine Learning
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  7. Case Studies
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Olist.html">
   35. Case study: Olist
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Churn.html">
   36. Case Study: Churn
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   37. Case Study: Olympic medals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="UserSurvey.html">
   38. Case Study: User survey
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Jokes.html">
   39. Case Study: Jokes
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/c7_case_studies/Olympics.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/LorenzF/data-science-practical-approach"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/LorenzF/data-science-practical-approach/issues/new?title=Issue%20on%20page%20%2Fc7_case_studies/Olympics.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/LorenzF/data-science-practical-approach/master?urlpath=tree/src/c7_case_studies/Olympics.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/LorenzF/data-science-practical-approach/blob/master/src/c7_case_studies/Olympics.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#goals">
   37.1. Goals
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parsing">
   37.2. Parsing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#preparation">
   37.3. Preparation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-types">
     37.3.1. Data Types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#missing-values">
     37.3.2. Missing values
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#duplicates">
     37.3.3. Duplicates
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#indexing">
     37.3.4. Indexing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#processing">
   37.4. Processing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#medals-per-country-per-sport">
     37.4.1. Medals per country per sport
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#average-statistics-per-year-country-and-sport">
     37.4.2. average statistics per year, country and sport
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exploration">
   37.5. Exploration
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#medals-per-group-season-sport">
     37.5.1. Medals per group (season, sport,…)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#athlete-attributes">
     37.5.2. Athlete attributes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualization">
   37.6. Visualization
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#best-performing-per-sport">
     37.6.1. best performing per sport
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     37.6.2. Athlete attributes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#summary">
   37.7. Summary
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="case-study-olympic-medals">
<h1><span class="section-number">37. </span>Case Study: Olympic medals<a class="headerlink" href="#case-study-olympic-medals" title="Permalink to this headline">¶</a></h1>
<p>In this case study we explore the history of medals in the summer and winter olympics</p>
<p>The case study is divided into several parts:</p>
<ul class="simple">
<li><p>Goals</p></li>
<li><p>Parsing</p></li>
<li><p>Preparation (cleaning)</p></li>
<li><p>Processing</p></li>
<li><p>Exploration</p></li>
<li><p>Visualization</p></li>
<li><p>Conclusion</p></li>
</ul>
<div class="section" id="goals">
<h2><span class="section-number">37.1. </span>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h2>
<p>In this section we define questions that will be our guideline througout the case study</p>
<ul class="simple">
<li><p>Which countries are over-/underperforming?</p></li>
<li><p>Are some countries exceptional in some sports?</p></li>
<li><p>Do physical traits have an influence on some sports?</p></li>
</ul>
<p>We’ll (try to) keep these question in mind when performing the case study.</p>
</div>
<div class="section" id="parsing">
<h2><span class="section-number">37.2. </span>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h2>
<p>we start out by importing all necessary libraries</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">scipy.stats</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">set_matplotlib_formats</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="c1">#set_matplotlib_formats(&#39;svg&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>in order to download datasets from kaggle, we need an API key to access their API, we’ll make that here</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/.kaggle&#39;</span><span class="p">)):</span>
    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/.kaggle&#39;</span><span class="p">))</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/.kaggle/kaggle.json&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;lorenzf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;key&quot;</span><span class="p">:</span><span class="s2">&quot;7a44a9e99b27e796177d793a3d85b8cf&quot;</span>
        <span class="p">}</span>
        <span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>now we can import kaggle too and download the datasets</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">kaggle</span>
<span class="n">kaggle</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">dataset_download_files</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;heesoo37/120-years-of-olympic-history-athletes-and-results&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./data&#39;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">ipykernel_9005</span><span class="o">/</span><span class="mf">183238531.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">kaggle</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">kaggle</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">dataset_download_files</span><span class="p">(</span><span class="n">dataset</span><span class="o">=</span><span class="s1">&#39;heesoo37/120-years-of-olympic-history-athletes-and-results&#39;</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;./data&#39;</span><span class="p">,</span> <span class="n">unzip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;kaggle&#39;
</pre></div>
</div>
</div>
</div>
<p>the csv files are now in the ‘./data’ folder, we can now read them using pandas, here is the list of all csv files in our folder</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;./data&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;WA_Fn-UseC_-Telco-Customer-Churn.csv&#39;,
 &#39;API_NY.GDP.PCAP.CD_DS2_en_csv_v2_3358201.csv&#39;,
 &#39;noc_regions.csv&#39;,
 &#39;freeFormResponses.csv&#39;,
 &#39;SurveySchema.csv&#39;,
 &#39;jester_ratings.csv&#39;,
 &#39;multipleChoiceResponses.csv&#39;,
 &#39;one-million-reddit-jokes.csv&#39;,
 &#39;jester_items.csv&#39;,
 &#39;athlete_events.csv&#39;,
 &#39;API_SP.POP.TOTL_DS2_en_csv_v2_3358390.csv&#39;]
</pre></div>
</div>
</div>
</div>
<p>The file of our interest is ‘athlete_events.csv’, it contains every contestant in every sport since 1896. Let’s print out the top 5 events.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/athlete_events.csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shape: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="n">athlete_events</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>shape: (271116, 15)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A Dijiang</td>
      <td>M</td>
      <td>24.0</td>
      <td>180.0</td>
      <td>80.0</td>
      <td>China</td>
      <td>CHN</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A Lamusi</td>
      <td>M</td>
      <td>23.0</td>
      <td>170.0</td>
      <td>60.0</td>
      <td>China</td>
      <td>CHN</td>
      <td>2012 Summer</td>
      <td>2012</td>
      <td>Summer</td>
      <td>London</td>
      <td>Judo</td>
      <td>Judo Men's Extra-Lightweight</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>Gunnar Nielsen Aaby</td>
      <td>M</td>
      <td>24.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Denmark</td>
      <td>DEN</td>
      <td>1920 Summer</td>
      <td>1920</td>
      <td>Summer</td>
      <td>Antwerpen</td>
      <td>Football</td>
      <td>Football Men's Football</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Edgar Lindenau Aabye</td>
      <td>M</td>
      <td>34.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Denmark/Sweden</td>
      <td>DEN</td>
      <td>1900 Summer</td>
      <td>1900</td>
      <td>Summer</td>
      <td>Paris</td>
      <td>Tug-Of-War</td>
      <td>Tug-Of-War Men's Tug-Of-War</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Christine Jacoba Aaftink</td>
      <td>F</td>
      <td>21.0</td>
      <td>185.0</td>
      <td>82.0</td>
      <td>Netherlands</td>
      <td>NED</td>
      <td>1988 Winter</td>
      <td>1988</td>
      <td>Winter</td>
      <td>Calgary</td>
      <td>Speed Skating</td>
      <td>Speed Skating Women's 500 metres</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Seems we have a name, gender, age, height and weight of the contestant, as wel as the country they represent, the games they attended located in which city. The last 3 columns specify the sport, event within the sport and a possible medal. Presumably the keeping of their score would have been difficult as different sports use different score metrics which would be hard to compare.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">noc_regions</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/noc_regions.csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;shape: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">noc_regions</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="n">noc_regions</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>shape: (230, 3)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>NOC</th>
      <th>region</th>
      <th>notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AFG</td>
      <td>Afghanistan</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AHO</td>
      <td>Curacao</td>
      <td>Netherlands Antilles</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ALB</td>
      <td>Albania</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>ALG</td>
      <td>Algeria</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AND</td>
      <td>Andorra</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="preparation">
<h2><span class="section-number">37.3. </span>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p>here we perform tasks to prepare the data in a more pleasing format.</p>
<div class="section" id="data-types">
<h3><span class="section-number">37.3.1. </span>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h3>
<p>Before we do anything with our data, it is good to see if our data types are in order</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 271116 entries, 0 to 271115
Data columns (total 15 columns):
 #   Column  Non-Null Count   Dtype  
---  ------  --------------   -----  
 0   ID      271116 non-null  int64  
 1   Name    271116 non-null  object 
 2   Sex     271116 non-null  object 
 3   Age     261642 non-null  float64
 4   Height  210945 non-null  float64
 5   Weight  208241 non-null  float64
 6   Team    271116 non-null  object 
 7   NOC     271116 non-null  object 
 8   Games   271116 non-null  object 
 9   Year    271116 non-null  int64  
 10  Season  271116 non-null  object 
 11  City    271116 non-null  object 
 12  Sport   271116 non-null  object 
 13  Event   271116 non-null  object 
 14  Medal   39783 non-null   object 
dtypes: float64(3), int64(2), object(10)
memory usage: 31.0+ MB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="p">[[</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Team&#39;</span><span class="p">,</span> <span class="s1">&#39;Season&#39;</span><span class="p">,</span> <span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="p">[[</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Team&#39;</span><span class="p">,</span> <span class="s1">&#39;Season&#39;</span><span class="p">,</span> <span class="s1">&#39;City&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
<span class="n">athlete_events</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 271116 entries, 0 to 271115
Data columns (total 15 columns):
 #   Column  Non-Null Count   Dtype   
---  ------  --------------   -----   
 0   ID      271116 non-null  int64   
 1   Name    271116 non-null  object  
 2   Sex     271116 non-null  category
 3   Age     261642 non-null  float64 
 4   Height  210945 non-null  float64 
 5   Weight  208241 non-null  float64 
 6   Team    271116 non-null  category
 7   NOC     271116 non-null  object  
 8   Games   271116 non-null  object  
 9   Year    271116 non-null  int64   
 10  Season  271116 non-null  category
 11  City    271116 non-null  category
 12  Sport   271116 non-null  category
 13  Event   271116 non-null  category
 14  Medal   39783 non-null   object  
dtypes: category(6), float64(3), int64(2), object(4)
memory usage: 20.8+ MB
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="missing-values">
<h3><span class="section-number">37.3.2. </span>Missing values<a class="headerlink" href="#missing-values" title="Permalink to this headline">¶</a></h3>
<p>for each dataframe we apply a few checks in order to see the quality of data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>ID         0.000000
Name       0.000000
Sex        0.000000
Age        3.494445
Height    22.193821
Weight    23.191180
Team       0.000000
NOC        0.000000
Games      0.000000
Year       0.000000
Season     0.000000
City       0.000000
Sport      0.000000
Event      0.000000
Medal     85.326207
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Age, 3.5% missing:</p>
<p>Here we can’t do much about it, we could impute using mean or median by looking at other contestants from the same sport/event, however I  have a feeling that missing ages might be prevalent in the same sports.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Year
1948    1176
1924    1142
1928     963
1920     845
1900     790
1906     743
1908     649
1956     638
1932     330
1952     277
1904     274
1960     221
1984     216
1936     213
1980     187
1896     163
1912     156
1968     118
1988     110
1972      96
1964      56
1976      52
1992      44
1996       8
1994       2
Name: Age, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Sport&#39;</span><span class="p">)[</span><span class="s1">&#39;Age&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sport
Gymnastics           1179
Athletics            1117
Shooting              821
Fencing               715
Cycling               678
Rowing                526
Swimming              524
Art Competitions      507
Wrestling             491
Football              375
Boxing                318
Sailing               285
Weightlifting         206
Hockey                204
Water Polo            200
Equestrianism         193
Basketball            186
Tennis                124
Diving                121
Archery                80
Alpine Skiing          78
Bobsleigh              72
Modern Pentathlon      53
Rugby                  48
Tug-Of-War             44
Name: Age, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Although some sports and years are more problematic, we cannot pinpoint a specific group where ages are missing. Imputing with mean or median would drasticly influence the distribution and standard deviation later on. I opt to leave the missing values as is and drop rows with NaN’s when using age in calculations.</p>
<p>Height &amp; Weight, 22 &amp; 23 % missing:</p>
<p>Similar to the Age, yet much more are missing, to a point where dropping would become problematic. Let’s see if we can find a hotspot of missing data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">)[[</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Year</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1952</th>
      <td>7170</td>
      <td>7171</td>
    </tr>
    <tr>
      <th>1948</th>
      <td>6311</td>
      <td>6329</td>
    </tr>
    <tr>
      <th>1936</th>
      <td>6209</td>
      <td>6414</td>
    </tr>
    <tr>
      <th>1924</th>
      <td>4719</td>
      <td>5003</td>
    </tr>
    <tr>
      <th>1928</th>
      <td>4599</td>
      <td>4856</td>
    </tr>
    <tr>
      <th>1956</th>
      <td>3748</td>
      <td>3754</td>
    </tr>
    <tr>
      <th>1920</th>
      <td>3525</td>
      <td>3821</td>
    </tr>
    <tr>
      <th>1912</th>
      <td>3319</td>
      <td>3444</td>
    </tr>
    <tr>
      <th>1992</th>
      <td>3175</td>
      <td>3157</td>
    </tr>
    <tr>
      <th>1908</th>
      <td>2626</td>
      <td>2618</td>
    </tr>
    <tr>
      <th>1932</th>
      <td>2108</td>
      <td>2771</td>
    </tr>
    <tr>
      <th>1996</th>
      <td>1871</td>
      <td>1821</td>
    </tr>
    <tr>
      <th>1900</th>
      <td>1820</td>
      <td>1857</td>
    </tr>
    <tr>
      <th>1906</th>
      <td>1476</td>
      <td>1528</td>
    </tr>
    <tr>
      <th>1904</th>
      <td>1088</td>
      <td>1154</td>
    </tr>
    <tr>
      <th>1960</th>
      <td>961</td>
      <td>1048</td>
    </tr>
    <tr>
      <th>1988</th>
      <td>933</td>
      <td>928</td>
    </tr>
    <tr>
      <th>1976</th>
      <td>876</td>
      <td>920</td>
    </tr>
    <tr>
      <th>1964</th>
      <td>681</td>
      <td>708</td>
    </tr>
    <tr>
      <th>1984</th>
      <td>598</td>
      <td>603</td>
    </tr>
    <tr>
      <th>1980</th>
      <td>588</td>
      <td>596</td>
    </tr>
    <tr>
      <th>1896</th>
      <td>334</td>
      <td>331</td>
    </tr>
    <tr>
      <th>1972</th>
      <td>301</td>
      <td>389</td>
    </tr>
    <tr>
      <th>1994</th>
      <td>187</td>
      <td>189</td>
    </tr>
    <tr>
      <th>2016</th>
      <td>176</td>
      <td>223</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Sport&#39;</span><span class="p">)[[</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Gymnastics</th>
      <td>8045</td>
      <td>8372</td>
    </tr>
    <tr>
      <th>Athletics</th>
      <td>5717</td>
      <td>6023</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>4045</td>
      <td>4391</td>
    </tr>
    <tr>
      <th>Shooting</th>
      <td>3779</td>
      <td>4148</td>
    </tr>
    <tr>
      <th>Fencing</th>
      <td>3773</td>
      <td>4195</td>
    </tr>
    <tr>
      <th>Art Competitions</th>
      <td>3519</td>
      <td>3523</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>2883</td>
      <td>3029</td>
    </tr>
    <tr>
      <th>Rowing</th>
      <td>2675</td>
      <td>2662</td>
    </tr>
    <tr>
      <th>Alpine Skiing</th>
      <td>2435</td>
      <td>2479</td>
    </tr>
    <tr>
      <th>Football</th>
      <td>2098</td>
      <td>2212</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>1808</td>
      <td>1849</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>1742</td>
      <td>1791</td>
    </tr>
    <tr>
      <th>Sailing</th>
      <td>1647</td>
      <td>1716</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>1469</td>
      <td>1497</td>
    </tr>
    <tr>
      <th>Cross Country Skiing</th>
      <td>1464</td>
      <td>1596</td>
    </tr>
    <tr>
      <th>Hockey</th>
      <td>1102</td>
      <td>1150</td>
    </tr>
    <tr>
      <th>Speed Skating</th>
      <td>1090</td>
      <td>1192</td>
    </tr>
    <tr>
      <th>Water Polo</th>
      <td>1058</td>
      <td>1122</td>
    </tr>
    <tr>
      <th>Weightlifting</th>
      <td>929</td>
      <td>134</td>
    </tr>
    <tr>
      <th>Ice Hockey</th>
      <td>905</td>
      <td>923</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>820</td>
      <td>854</td>
    </tr>
    <tr>
      <th>Bobsleigh</th>
      <td>786</td>
      <td>846</td>
    </tr>
    <tr>
      <th>Diving</th>
      <td>764</td>
      <td>828</td>
    </tr>
    <tr>
      <th>Basketball</th>
      <td>655</td>
      <td>858</td>
    </tr>
    <tr>
      <th>Figure Skating</th>
      <td>631</td>
      <td>786</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Again, no hotspots. For the same reason (distribution) we will not be imputing values, although for machine learning reasons this might be useful to increase the training pool. We will drop the rows with missing values whenever we use the height/weight columns. It would be wise here to inform our audience that conclusions on this data might be skewed by a possible bias - there might be a reason the data is missing - which might in turn cause us to make a wrongful conclusion!</p>
<p>Medal, 85% Missing:</p>
<p>Lastly we see that most are missing the medal, this is obviously that they did not win one. We could boldly assume that since each event has 3 medals, there must be an average of 20 contestants (17/20 = 85%). But this might be deviating over time and sport.</p>
</div>
<div class="section" id="duplicates">
<h3><span class="section-number">37.3.3. </span>Duplicates<a class="headerlink" href="#duplicates" title="Permalink to this headline">¶</a></h3>
<p>For any reason, our dataset might be containing duplicates that would be counted twice and will introduce a bias we would not want. On the other hand, duplicates can be subjected to interpretation, here we would say that if 2 records share a name, gender, NOC, Games and event, the rows would be identical.
This would mean that the person would have performed twice in the same event for the same games under the same flag. The illustration below demonstrates a duplicate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="p">[</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Name</span> <span class="o">==</span> <span class="s1">&#39;Jacques Doucet&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ID</th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>57956</th>
      <td>29661</td>
      <td>Jacques Doucet</td>
      <td>M</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Favorite-17</td>
      <td>FRA</td>
      <td>1900 Summer</td>
      <td>1900</td>
      <td>Summer</td>
      <td>Paris</td>
      <td>Sailing</td>
      <td>Sailing Mixed Open</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>57957</th>
      <td>29661</td>
      <td>Jacques Doucet</td>
      <td>M</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Favorite-1</td>
      <td>FRA</td>
      <td>1900 Summer</td>
      <td>1900</td>
      <td>Summer</td>
      <td>Paris</td>
      <td>Sailing</td>
      <td>Sailing Mixed 2-3 Ton</td>
      <td>Silver</td>
    </tr>
    <tr>
      <th>57958</th>
      <td>29661</td>
      <td>Jacques Doucet</td>
      <td>M</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Favorite-1</td>
      <td>FRA</td>
      <td>1900 Summer</td>
      <td>1900</td>
      <td>Summer</td>
      <td>Paris</td>
      <td>Sailing</td>
      <td>Sailing Mixed 2-3 Ton</td>
      <td>Silver</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can se that Jacques for some reason is listed twice for the Sailing Mixed 2-3 Ton event. He won silver, but coming in second is no excused to be listed a second time! Perhaps we can find out where things went wrong by investigating in which year the duplicates appear.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">duplicate_events</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="p">[</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">duplicated</span><span class="p">([</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">])]</span>
<span class="n">duplicate_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Year&#39;</span><span class="p">])[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Year
1900    110
1908     35
1924    126
1928    347
1932    504
1936    258
1948    100
1968      2
1996      2
1998      3
2002      3
2012      1
Name: Name, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Seems most of them happen before 1948, perhaps due to errors in manual entries, it feels safe to delete them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="indexing">
<h3><span class="section-number">37.3.4. </span>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h3>
<p>It is more convenient to work with an index, our dataset already contains an id which we can use as index</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;ID&#39;</span><span class="p">)</span>
<span class="n">athlete_events</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
    <tr>
      <th>ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>A Dijiang</td>
      <td>M</td>
      <td>24.0</td>
      <td>180.0</td>
      <td>80.0</td>
      <td>China</td>
      <td>CHN</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>A Lamusi</td>
      <td>M</td>
      <td>23.0</td>
      <td>170.0</td>
      <td>60.0</td>
      <td>China</td>
      <td>CHN</td>
      <td>2012 Summer</td>
      <td>2012</td>
      <td>Summer</td>
      <td>London</td>
      <td>Judo</td>
      <td>Judo Men's Extra-Lightweight</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Gunnar Nielsen Aaby</td>
      <td>M</td>
      <td>24.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Denmark</td>
      <td>DEN</td>
      <td>1920 Summer</td>
      <td>1920</td>
      <td>Summer</td>
      <td>Antwerpen</td>
      <td>Football</td>
      <td>Football Men's Football</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Edgar Lindenau Aabye</td>
      <td>M</td>
      <td>34.0</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Denmark/Sweden</td>
      <td>DEN</td>
      <td>1900 Summer</td>
      <td>1900</td>
      <td>Summer</td>
      <td>Paris</td>
      <td>Tug-Of-War</td>
      <td>Tug-Of-War Men's Tug-Of-War</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Christine Jacoba Aaftink</td>
      <td>F</td>
      <td>21.0</td>
      <td>185.0</td>
      <td>82.0</td>
      <td>Netherlands</td>
      <td>NED</td>
      <td>1988 Winter</td>
      <td>1988</td>
      <td>Winter</td>
      <td>Calgary</td>
      <td>Speed Skating</td>
      <td>Speed Skating Women's 500 metres</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="processing">
<h2><span class="section-number">37.4. </span>Processing<a class="headerlink" href="#processing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="medals-per-country-per-sport">
<h3><span class="section-number">37.4.1. </span>Medals per country per sport<a class="headerlink" href="#medals-per-country-per-sport" title="Permalink to this headline">¶</a></h3>
<p>To find out which country (NOC) performs the best, we would like to have a dataframe with 3 columns [‘Gold’, ‘Silver’, ‘Bronze’] containing the count of each, as row index, we would have the games and the NOC, thus a multiindex.
An important detail is that team sports are given multiple medals, as indicated by the exampe below. Be careful as bias might not always as visible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="p">[(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Event</span> <span class="o">==</span> <span class="s2">&quot;Basketball Men&#39;s Basketball&quot;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Games</span><span class="o">==</span><span class="s1">&#39;1992 Summer&#39;</span><span class="p">)</span><span class="o">&amp;</span><span class="p">(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Medal</span><span class="o">==</span><span class="s1">&#39;Gold&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
    <tr>
      <th>ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7901</th>
      <td>Charles Wade Barkley</td>
      <td>M</td>
      <td>29.0</td>
      <td>198.0</td>
      <td>114.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>11668</th>
      <td>Larry Joe Bird</td>
      <td>M</td>
      <td>35.0</td>
      <td>205.0</td>
      <td>100.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>30009</th>
      <td>Clyde Austin Drexler</td>
      <td>M</td>
      <td>30.0</td>
      <td>200.0</td>
      <td>101.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>33553</th>
      <td>Patrick Aloysius Ewing</td>
      <td>M</td>
      <td>29.0</td>
      <td>213.0</td>
      <td>109.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>55424</th>
      <td>Earvin "Magic" Johnson, Jr.</td>
      <td>M</td>
      <td>32.0</td>
      <td>205.0</td>
      <td>100.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>55881</th>
      <td>Michael Jeffrey Jordan</td>
      <td>M</td>
      <td>29.0</td>
      <td>198.0</td>
      <td>90.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>65809</th>
      <td>Christian Donald Laettner</td>
      <td>M</td>
      <td>22.0</td>
      <td>211.0</td>
      <td>107.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>74176</th>
      <td>Karl Malone</td>
      <td>M</td>
      <td>29.0</td>
      <td>205.0</td>
      <td>116.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>83179</th>
      <td>Christopher Paul "Chris" Mullin</td>
      <td>M</td>
      <td>28.0</td>
      <td>200.0</td>
      <td>98.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>95105</th>
      <td>Scottie Maurice Pippen</td>
      <td>M</td>
      <td>26.0</td>
      <td>200.0</td>
      <td>102.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>101428</th>
      <td>David Maurice Robinson</td>
      <td>M</td>
      <td>26.0</td>
      <td>216.0</td>
      <td>107.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>115325</th>
      <td>John Houston Stockton</td>
      <td>M</td>
      <td>30.0</td>
      <td>185.0</td>
      <td>79.0</td>
      <td>United States</td>
      <td>USA</td>
      <td>1992 Summer</td>
      <td>1992</td>
      <td>Summer</td>
      <td>Barcelona</td>
      <td>Basketball</td>
      <td>Basketball Men's Basketball</td>
      <td>Gold</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The preprocessing for this dataframe seem complex but is combination of several operations:</p>
<ul class="simple">
<li><p>drop all records with no medals</p></li>
<li><p>drop duplicates based on ‘Games’, ‘NOC’ , ‘Event’, ‘Medal’ to correct for team sports</p></li>
<li><p>group per ‘Games’, ‘NOC’ , ‘Medal’</p></li>
<li><p>aggregate groups by calculating their size</p></li>
</ul>
<p>At this point, we have a single column containing the amount of medals and 3 indices: ‘Games’ , ‘NOC’ and ‘Medal’</p>
<ul class="simple">
<li><p>unstack the ‘Medal’ column to obtain 3 columns ‘Gold’, ‘Silver’, ‘Bronze’</p></li>
<li><p>make sure the order of columns is ‘Gold’, ‘Silver’, ‘Bronze’</p></li>
<li><p>drop rows where no medals are won, as we do not need those rows</p></li>
</ul>
<p>This operation looks like the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Medal&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">([</span><span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Event&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Medal&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s1">&#39;Medal&#39;</span><span class="p">)[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="c1">#.dropna(how=&#39;all&#39;)#.fillna(0)</span>
<span class="n">medals_country_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="p">[</span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="n">medals_country_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th>UZB</th>
      <th>Wrestling</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">VEN</th>
      <th>Athletics</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>VIE</th>
      <th>Shooting</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>6915 rows × 3 columns</p>
</div></div></div>
</div>
</div>
<div class="section" id="average-statistics-per-year-country-and-sport">
<h3><span class="section-number">37.4.2. </span>average statistics per year, country and sport<a class="headerlink" href="#average-statistics-per-year-country-and-sport" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">avg_stats_df</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Games&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">])[[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">avg_stats_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">F</th>
      <th rowspan="5" valign="top">AFG</th>
      <th rowspan="2" valign="top">2004 Summer</th>
      <th>Athletics</th>
      <td>18.0</td>
      <td>180.0</td>
      <td>56.0</td>
    </tr>
    <tr>
      <th>Judo</th>
      <td>18.0</td>
      <td>165.0</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>2008 Summer</th>
      <th>Athletics</th>
      <td>22.0</td>
      <td>180.0</td>
      <td>56.0</td>
    </tr>
    <tr>
      <th>2012 Summer</th>
      <th>Athletics</th>
      <td>23.0</td>
      <td>160.0</td>
      <td>52.0</td>
    </tr>
    <tr>
      <th>2016 Summer</th>
      <th>Athletics</th>
      <td>20.0</td>
      <td>165.0</td>
      <td>55.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">M</th>
      <th rowspan="5" valign="top">ZIM</th>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th>Archery</th>
      <td>37.0</td>
      <td>186.0</td>
      <td>78.0</td>
    </tr>
    <tr>
      <th>Athletics</th>
      <td>29.6</td>
      <td>167.6</td>
      <td>63.2</td>
    </tr>
    <tr>
      <th>Rowing</th>
      <td>27.0</td>
      <td>191.0</td>
      <td>87.0</td>
    </tr>
    <tr>
      <th>Shooting</th>
      <td>42.0</td>
      <td>182.0</td>
      <td>80.0</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>22.0</td>
      <td>181.0</td>
      <td>84.0</td>
    </tr>
  </tbody>
</table>
<p>31329 rows × 3 columns</p>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="exploration">
<h2><span class="section-number">37.5. </span>Exploration<a class="headerlink" href="#exploration" title="Permalink to this headline">¶</a></h2>
<p>At first we would like to know which countries are performing well, we could simply do a sum of all medals for each country as shown below</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_agg_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">medals_agg_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>USA</th>
      <td>871</td>
      <td>653</td>
      <td>585</td>
    </tr>
    <tr>
      <th>URS</th>
      <td>405</td>
      <td>298</td>
      <td>285</td>
    </tr>
    <tr>
      <th>GER</th>
      <td>287</td>
      <td>308</td>
      <td>315</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>239</td>
      <td>279</td>
      <td>272</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>234</td>
      <td>209</td>
      <td>229</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>224</td>
      <td>244</td>
      <td>299</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>208</td>
      <td>152</td>
      <td>140</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>181</td>
      <td>167</td>
      <td>186</td>
    </tr>
    <tr>
      <th>SWE</th>
      <td>170</td>
      <td>194</td>
      <td>219</td>
    </tr>
    <tr>
      <th>GDR</th>
      <td>165</td>
      <td>128</td>
      <td>134</td>
    </tr>
    <tr>
      <th>HUN</th>
      <td>161</td>
      <td>152</td>
      <td>168</td>
    </tr>
    <tr>
      <th>NOR</th>
      <td>148</td>
      <td>126</td>
      <td>124</td>
    </tr>
    <tr>
      <th>AUS</th>
      <td>142</td>
      <td>163</td>
      <td>184</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>140</td>
      <td>135</td>
      <td>159</td>
    </tr>
    <tr>
      <th>FIN</th>
      <td>121</td>
      <td>123</td>
      <td>157</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>118</td>
      <td>153</td>
      <td>182</td>
    </tr>
    <tr>
      <th>NED</th>
      <td>113</td>
      <td>119</td>
      <td>135</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>106</td>
      <td>95</td>
      <td>88</td>
    </tr>
    <tr>
      <th>SUI</th>
      <td>95</td>
      <td>110</td>
      <td>105</td>
    </tr>
    <tr>
      <th>ROU</th>
      <td>81</td>
      <td>90</td>
      <td>114</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As expected, USA leads the charts, interestingly although disbanded over 30 years ago, the soviet are still second in amount of medals, this leads me to several questions:</p>
<ul class="simple">
<li><p>does every country have the same resources?</p></li>
<li><p>are some sports easier to obtain medals?</p></li>
<li><p>is the type of medal important?</p></li>
</ul>
<p>To create a simple answer on the last one, we could for each country calculate the percentage of gold/silver/bronze medals they obtained, meaning that not the amount but the ratio is important.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_perc_df</span> <span class="o">=</span> <span class="n">medals_agg_df</span><span class="p">[</span><span class="n">medals_agg_df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">/</span><span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">medals_perc_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ETH</th>
      <td>0.476190</td>
      <td>0.142857</td>
      <td>0.380952</td>
    </tr>
    <tr>
      <th>CHN</th>
      <td>0.416000</td>
      <td>0.304000</td>
      <td>0.280000</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.412992</td>
      <td>0.309625</td>
      <td>0.277383</td>
    </tr>
    <tr>
      <th>URS</th>
      <td>0.409919</td>
      <td>0.301619</td>
      <td>0.288462</td>
    </tr>
    <tr>
      <th>TUR</th>
      <td>0.402174</td>
      <td>0.293478</td>
      <td>0.304348</td>
    </tr>
    <tr>
      <th>EUN</th>
      <td>0.387931</td>
      <td>0.310345</td>
      <td>0.301724</td>
    </tr>
    <tr>
      <th>NZL</th>
      <td>0.387931</td>
      <td>0.232759</td>
      <td>0.379310</td>
    </tr>
    <tr>
      <th>GDR</th>
      <td>0.386417</td>
      <td>0.299766</td>
      <td>0.313817</td>
    </tr>
    <tr>
      <th>NOR</th>
      <td>0.371859</td>
      <td>0.316583</td>
      <td>0.311558</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.366782</td>
      <td>0.328720</td>
      <td>0.304498</td>
    </tr>
    <tr>
      <th>CUB</th>
      <td>0.363208</td>
      <td>0.306604</td>
      <td>0.330189</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.348214</td>
      <td>0.311012</td>
      <td>0.340774</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.344828</td>
      <td>0.241379</td>
      <td>0.413793</td>
    </tr>
    <tr>
      <th>SVK</th>
      <td>0.343750</td>
      <td>0.406250</td>
      <td>0.250000</td>
    </tr>
    <tr>
      <th>CRO</th>
      <td>0.340909</td>
      <td>0.363636</td>
      <td>0.295455</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.338951</td>
      <td>0.312734</td>
      <td>0.348315</td>
    </tr>
    <tr>
      <th>HUN</th>
      <td>0.334719</td>
      <td>0.316008</td>
      <td>0.349272</td>
    </tr>
    <tr>
      <th>KEN</th>
      <td>0.329114</td>
      <td>0.367089</td>
      <td>0.303797</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.322581</td>
      <td>0.311060</td>
      <td>0.366359</td>
    </tr>
    <tr>
      <th>GER</th>
      <td>0.315385</td>
      <td>0.338462</td>
      <td>0.346154</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_agg_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;ETH&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Medal
Gold      20
Silver     6
Bronze    16
Name: ETH, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Out of nowhere Ethiopia seems to be the highest achiever when it comes to gold medals, but this might be an anomaly as their total medal count is rather low, but still impressive! Also China steps up showing that they don’t take second best.</p>
<p>I also mentioned resources, some countries are not as big as USA an China and therefore send less athletes.
We could have checked for the amount of athlete’s yet opted to go for each countries population.
If a country has a bigger population it means it has a bigger pool of genetically favored persons for a sport.</p>
<p>To investigate this I searched for a dataset containing the data, coming from the worldbank API, in the next section we download the data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>
<span class="kn">from</span> <span class="nn">zipfile</span> <span class="kn">import</span> <span class="n">ZipFile</span>
<span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resp</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;https://api.worldbank.org/v2/en/indicator/SP.POP.TOTL?downloadformat=csv&quot;</span><span class="p">)</span>
<span class="n">zipfile</span> <span class="o">=</span> <span class="n">ZipFile</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found files: </span><span class="si">{</span><span class="n">zipfile</span><span class="o">.</span><span class="n">namelist</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>found files: [&#39;Metadata_Indicator_API_SP.POP.TOTL_DS2_en_csv_v2_3358390.csv&#39;, &#39;API_SP.POP.TOTL_DS2_en_csv_v2_3358390.csv&#39;, &#39;Metadata_Country_API_SP.POP.TOTL_DS2_en_csv_v2_3358390.csv&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;API_SP.POP.TOTL_DS2_en_csv_v2_3358390.csv&#39;</span>
<span class="n">zipfile</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;./data&#39;</span><span class="p">)</span>
<span class="n">pop_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/&#39;</span><span class="o">+</span><span class="n">file_name</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">pop_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country Name</th>
      <th>Country Code</th>
      <th>Indicator Name</th>
      <th>Indicator Code</th>
      <th>1960</th>
      <th>1961</th>
      <th>1962</th>
      <th>1963</th>
      <th>1964</th>
      <th>1965</th>
      <th>...</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>Unnamed: 65</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Aruba</td>
      <td>ABW</td>
      <td>Population, total</td>
      <td>SP.POP.TOTL</td>
      <td>54208.0</td>
      <td>55434.0</td>
      <td>56234.0</td>
      <td>56699.0</td>
      <td>57029.0</td>
      <td>57357.0</td>
      <td>...</td>
      <td>102565.0</td>
      <td>103165.0</td>
      <td>103776.0</td>
      <td>104339.0</td>
      <td>104865.0</td>
      <td>105361.0</td>
      <td>105846.0</td>
      <td>106310.0</td>
      <td>106766.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Africa Eastern and Southern</td>
      <td>AFE</td>
      <td>Population, total</td>
      <td>SP.POP.TOTL</td>
      <td>130836765.0</td>
      <td>134159786.0</td>
      <td>137614644.0</td>
      <td>141202036.0</td>
      <td>144920186.0</td>
      <td>148769974.0</td>
      <td>...</td>
      <td>547482863.0</td>
      <td>562601578.0</td>
      <td>578075373.0</td>
      <td>593871847.0</td>
      <td>609978946.0</td>
      <td>626392880.0</td>
      <td>643090131.0</td>
      <td>660046272.0</td>
      <td>677243299.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Afghanistan</td>
      <td>AFG</td>
      <td>Population, total</td>
      <td>SP.POP.TOTL</td>
      <td>8996967.0</td>
      <td>9169406.0</td>
      <td>9351442.0</td>
      <td>9543200.0</td>
      <td>9744772.0</td>
      <td>9956318.0</td>
      <td>...</td>
      <td>31161378.0</td>
      <td>32269592.0</td>
      <td>33370804.0</td>
      <td>34413603.0</td>
      <td>35383028.0</td>
      <td>36296111.0</td>
      <td>37171922.0</td>
      <td>38041757.0</td>
      <td>38928341.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Africa Western and Central</td>
      <td>AFW</td>
      <td>Population, total</td>
      <td>SP.POP.TOTL</td>
      <td>96396419.0</td>
      <td>98407221.0</td>
      <td>100506960.0</td>
      <td>102691339.0</td>
      <td>104953470.0</td>
      <td>107289875.0</td>
      <td>...</td>
      <td>370243017.0</td>
      <td>380437896.0</td>
      <td>390882979.0</td>
      <td>401586651.0</td>
      <td>412551299.0</td>
      <td>423769930.0</td>
      <td>435229381.0</td>
      <td>446911598.0</td>
      <td>458803476.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Angola</td>
      <td>AGO</td>
      <td>Population, total</td>
      <td>SP.POP.TOTL</td>
      <td>5454938.0</td>
      <td>5531451.0</td>
      <td>5608499.0</td>
      <td>5679409.0</td>
      <td>5734995.0</td>
      <td>5770573.0</td>
      <td>...</td>
      <td>25107925.0</td>
      <td>26015786.0</td>
      <td>26941773.0</td>
      <td>27884380.0</td>
      <td>28842482.0</td>
      <td>29816769.0</td>
      <td>30809787.0</td>
      <td>31825299.0</td>
      <td>32866268.0</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 66 columns</p>
</div></div></div>
</div>
<p>You can see that for each year from 1960 the population for each country is given, we first have to stack/unpivot the data to obtain a view that is useful for our purpose.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_df</span> <span class="o">=</span> <span class="n">pop_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Country Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Indicator Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Indicator Code&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">pop_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">pop_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Unnamed&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Country Code&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span>
<span class="n">pop_df</span> <span class="o">=</span> <span class="n">pop_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;population&#39;</span><span class="p">)</span>
<span class="n">pop_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Country Code      
ABW           1960    54208.0
              1961    55434.0
              1962    56234.0
              1963    56699.0
              1964    57029.0
Name: population, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Now we have to match this with our medals dataset we created earlier</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>There seems to be a problem, our medals dataset does not indicate the year, we can solve this by adding a column</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">&#39;Games&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span>
<span class="n">medals_country_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1896</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1896</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1896</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Great! now we can merge the population data with our medals data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_pop_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">medals_country_df</span><span class="p">,</span> <span class="n">pop_df</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">),</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
<span class="n">medals_country_pop_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
      <th>population</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1896</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1896</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1896</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th>UZB</th>
      <th>Wrestling</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>2016</td>
      <td>31847900.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">VEN</th>
      <th>Athletics</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
    <tr>
      <th>VIE</th>
      <th>Shooting</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>2016</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>6915 rows × 5 columns</p>
</div></div></div>
</div>
<p>As our population data only contained data from 1960 onwards, we need to discard some of our rows, we do this with the dropna method</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_pop_df</span> <span class="o">=</span> <span class="n">medals_country_pop_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">medals_country_pop_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
      <th>population</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1960 Summer</th>
      <th rowspan="2" valign="top">ARG</th>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1960</td>
      <td>20481781.0</td>
    </tr>
    <tr>
      <th>Sailing</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1960</td>
      <td>20481781.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">AUS</th>
      <th>Athletics</th>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1960</td>
      <td>10276477.0</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1960</td>
      <td>10276477.0</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1960</td>
      <td>10276477.0</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th rowspan="2" valign="top">UZB</th>
      <th>Weightlifting</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2016</td>
      <td>31847900.0</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>2016</td>
      <td>31847900.0</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">VEN</th>
      <th>Athletics</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>2016</td>
      <td>29851249.0</td>
    </tr>
  </tbody>
</table>
<p>3710 rows × 5 columns</p>
</div></div></div>
</div>
<p>In order to use our population information, we need to be creative, I decided to keep things simple and for each type of medal divide the amount with the population, therefore the value is changed from:</p>
<ul class="simple">
<li><p>the amount of medals earned for a country</p></li>
</ul>
<p>to</p>
<ul class="simple">
<li><p>the amount of medals earned per person for a country</p></li>
</ul>
<p>Which will be much lower for countries with a higher population</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_pop_df</span> <span class="o">=</span> <span class="n">medals_country_pop_df</span><span class="p">[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">medals_country_pop_df</span><span class="o">.</span><span class="n">population</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="n">medals_pop_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1960 Summer</th>
      <th rowspan="2" valign="top">ARG</th>
      <th>Boxing</th>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>4.882388e-08</td>
    </tr>
    <tr>
      <th>Sailing</th>
      <td>0.000000e+00</td>
      <td>4.882388e-08</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">AUS</th>
      <th>Athletics</th>
      <td>9.730961e-08</td>
      <td>1.946192e-07</td>
      <td>9.730961e-08</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>1.946192e-07</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>9.730961e-08</td>
      <td>9.730961e-08</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th rowspan="2" valign="top">UZB</th>
      <th>Weightlifting</th>
      <td>3.139924e-08</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>9.419773e-08</td>
    </tr>
    <tr>
      <th rowspan="3" valign="top">VEN</th>
      <th>Athletics</th>
      <td>0.000000e+00</td>
      <td>3.349944e-08</td>
      <td>0.000000e+00</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>3.349944e-08</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>3.349944e-08</td>
    </tr>
  </tbody>
</table>
<p>3710 rows × 3 columns</p>
</div></div></div>
</div>
<p>You can see that these values are much lower as populations are very high. Now we can do exactly the same as before and sort per highest total amount.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_pop_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>LIE</th>
      <td>0.000077</td>
      <td>0.000077</td>
      <td>0.000193</td>
    </tr>
    <tr>
      <th>NOR</th>
      <td>0.000022</td>
      <td>0.000020</td>
      <td>0.000018</td>
    </tr>
    <tr>
      <th>NZL</th>
      <td>0.000011</td>
      <td>0.000007</td>
      <td>0.000011</td>
    </tr>
    <tr>
      <th>FIN</th>
      <td>0.000010</td>
      <td>0.000012</td>
      <td>0.000014</td>
    </tr>
    <tr>
      <th>HUN</th>
      <td>0.000010</td>
      <td>0.000010</td>
      <td>0.000010</td>
    </tr>
    <tr>
      <th>SWE</th>
      <td>0.000008</td>
      <td>0.000010</td>
      <td>0.000010</td>
    </tr>
    <tr>
      <th>CUB</th>
      <td>0.000007</td>
      <td>0.000006</td>
      <td>0.000006</td>
    </tr>
    <tr>
      <th>CHI</th>
      <td>0.000007</td>
      <td>0.000014</td>
      <td>0.000013</td>
    </tr>
    <tr>
      <th>AUS</th>
      <td>0.000007</td>
      <td>0.000008</td>
      <td>0.000009</td>
    </tr>
    <tr>
      <th>JAM</th>
      <td>0.000005</td>
      <td>0.000010</td>
      <td>0.000007</td>
    </tr>
    <tr>
      <th>AUT</th>
      <td>0.000005</td>
      <td>0.000009</td>
      <td>0.000009</td>
    </tr>
    <tr>
      <th>EST</th>
      <td>0.000004</td>
      <td>0.000004</td>
      <td>0.000006</td>
    </tr>
    <tr>
      <th>ROU</th>
      <td>0.000004</td>
      <td>0.000004</td>
      <td>0.000005</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>0.000003</td>
      <td>0.000004</td>
      <td>0.000004</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.000003</td>
      <td>0.000002</td>
      <td>0.000003</td>
    </tr>
    <tr>
      <th>SUR</th>
      <td>0.000003</td>
      <td>0.000000</td>
      <td>0.000002</td>
    </tr>
    <tr>
      <th>TTO</th>
      <td>0.000002</td>
      <td>0.000003</td>
      <td>0.000008</td>
    </tr>
    <tr>
      <th>BRN</th>
      <td>0.000002</td>
      <td>0.000002</td>
      <td>0.000003</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.000002</td>
      <td>0.000002</td>
      <td>0.000002</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.000002</td>
      <td>0.000002</td>
      <td>0.000002</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Our data is now completely different, for the reason that Liechtenstein is very small it scores very high.
You could argue that being small is an advantage here, yet it also means you have less chance to have highly athletic persons. Just to make sure that they did not by accident get a gold medal let’s get all of their medals.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="p">[(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">NOC</span><span class="o">==</span><span class="s1">&#39;LIE&#39;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="o">~</span><span class="p">(</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Medal</span><span class="o">.</span><span class="n">isna</span><span class="p">())]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
    <tr>
      <th>ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>37329</th>
      <td>Paul Frommelt</td>
      <td>M</td>
      <td>30.0</td>
      <td>178.0</td>
      <td>70.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1988 Winter</td>
      <td>1988</td>
      <td>Winter</td>
      <td>Calgary</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Men's Slalom</td>
      <td>Bronze</td>
    </tr>
    <tr>
      <th>37330</th>
      <td>Willi Frommelt</td>
      <td>M</td>
      <td>23.0</td>
      <td>180.0</td>
      <td>78.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1976 Winter</td>
      <td>1976</td>
      <td>Winter</td>
      <td>Innsbruck</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Men's Slalom</td>
      <td>Bronze</td>
    </tr>
    <tr>
      <th>62609</th>
      <td>Ursula Konzett (-Gregg)</td>
      <td>F</td>
      <td>24.0</td>
      <td>164.0</td>
      <td>NaN</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1984 Winter</td>
      <td>1984</td>
      <td>Winter</td>
      <td>Sarajevo</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Women's Slalom</td>
      <td>Bronze</td>
    </tr>
    <tr>
      <th>129663</th>
      <td>Andreas "Andi" Wenzel</td>
      <td>M</td>
      <td>21.0</td>
      <td>175.0</td>
      <td>70.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1980 Winter</td>
      <td>1980</td>
      <td>Winter</td>
      <td>Lake Placid</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Men's Giant Slalom</td>
      <td>Silver</td>
    </tr>
    <tr>
      <th>129663</th>
      <td>Andreas "Andi" Wenzel</td>
      <td>M</td>
      <td>25.0</td>
      <td>175.0</td>
      <td>70.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1984 Winter</td>
      <td>1984</td>
      <td>Winter</td>
      <td>Sarajevo</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Men's Giant Slalom</td>
      <td>Bronze</td>
    </tr>
    <tr>
      <th>129665</th>
      <td>Hannelore "Hanni" Wenzel (-Weirather)</td>
      <td>F</td>
      <td>19.0</td>
      <td>165.0</td>
      <td>57.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1976 Winter</td>
      <td>1976</td>
      <td>Winter</td>
      <td>Innsbruck</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Women's Slalom</td>
      <td>Bronze</td>
    </tr>
    <tr>
      <th>129665</th>
      <td>Hannelore "Hanni" Wenzel (-Weirather)</td>
      <td>F</td>
      <td>23.0</td>
      <td>165.0</td>
      <td>57.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1980 Winter</td>
      <td>1980</td>
      <td>Winter</td>
      <td>Lake Placid</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Women's Downhill</td>
      <td>Silver</td>
    </tr>
    <tr>
      <th>129665</th>
      <td>Hannelore "Hanni" Wenzel (-Weirather)</td>
      <td>F</td>
      <td>23.0</td>
      <td>165.0</td>
      <td>57.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1980 Winter</td>
      <td>1980</td>
      <td>Winter</td>
      <td>Lake Placid</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Women's Giant Slalom</td>
      <td>Gold</td>
    </tr>
    <tr>
      <th>129665</th>
      <td>Hannelore "Hanni" Wenzel (-Weirather)</td>
      <td>F</td>
      <td>23.0</td>
      <td>165.0</td>
      <td>57.0</td>
      <td>Liechtenstein</td>
      <td>LIE</td>
      <td>1980 Winter</td>
      <td>1980</td>
      <td>Winter</td>
      <td>Lake Placid</td>
      <td>Alpine Skiing</td>
      <td>Alpine Skiing Women's Slalom</td>
      <td>Gold</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>In my opinion this looks about right, 2 gold medals, 2 silver and 5 bronze is impressive for a country with less than 40k inhabitants.</p>
<p>Also a lot of scandinavian countries seem to have taken the lead, this might be indicating that there is less competition in winter sports as they are known to excel there.</p>
<p>Most remarkable is the fall of the USA, which falls to the 20th place, indicating that if we correct for the amount of persons in the country it does not perform that well.</p>
<p>In a same method we could also account for the Gross Domestic Product per Capita, indicating the wealth of a country, again we download data from worldbank</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resp</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;https://api.worldbank.org/v2/en/indicator/NY.GDP.PCAP.CD?downloadformat=csv&quot;</span><span class="p">)</span>
<span class="n">zipfile</span> <span class="o">=</span> <span class="n">ZipFile</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;found files: </span><span class="si">{</span><span class="n">zipfile</span><span class="o">.</span><span class="n">namelist</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>found files: [&#39;Metadata_Indicator_API_NY.GDP.PCAP.CD_DS2_en_csv_v2_3358201.csv&#39;, &#39;API_NY.GDP.PCAP.CD_DS2_en_csv_v2_3358201.csv&#39;, &#39;Metadata_Country_API_NY.GDP.PCAP.CD_DS2_en_csv_v2_3358201.csv&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">file_name</span> <span class="o">=</span> <span class="s1">&#39;API_NY.GDP.PCAP.CD_DS2_en_csv_v2_3358201.csv&#39;</span>
<span class="n">zipfile</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;./data&#39;</span><span class="p">)</span>
<span class="n">gdp_cap_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/&#39;</span><span class="o">+</span><span class="n">file_name</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Country Name</th>
      <th>Country Code</th>
      <th>Indicator Name</th>
      <th>Indicator Code</th>
      <th>1960</th>
      <th>1961</th>
      <th>1962</th>
      <th>1963</th>
      <th>1964</th>
      <th>1965</th>
      <th>...</th>
      <th>2012</th>
      <th>2013</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>Unnamed: 65</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Aruba</td>
      <td>ABW</td>
      <td>GDP per capita (current US$)</td>
      <td>NY.GDP.PCAP.CD</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>24712.493263</td>
      <td>26441.619936</td>
      <td>26893.011506</td>
      <td>28396.908423</td>
      <td>28452.170615</td>
      <td>29350.805019</td>
      <td>30253.279358</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Africa Eastern and Southern</td>
      <td>AFE</td>
      <td>GDP per capita (current US$)</td>
      <td>NY.GDP.PCAP.CD</td>
      <td>147.836769</td>
      <td>147.238537</td>
      <td>156.426780</td>
      <td>182.521139</td>
      <td>162.594548</td>
      <td>180.489043</td>
      <td>...</td>
      <td>1672.363658</td>
      <td>1653.188436</td>
      <td>1658.650062</td>
      <td>1507.800256</td>
      <td>1404.953164</td>
      <td>1540.232473</td>
      <td>1534.171767</td>
      <td>1485.307425</td>
      <td>1330.140232</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Afghanistan</td>
      <td>AFG</td>
      <td>GDP per capita (current US$)</td>
      <td>NY.GDP.PCAP.CD</td>
      <td>59.773234</td>
      <td>59.860900</td>
      <td>58.458009</td>
      <td>78.706429</td>
      <td>82.095307</td>
      <td>101.108325</td>
      <td>...</td>
      <td>641.871438</td>
      <td>637.165464</td>
      <td>613.856505</td>
      <td>578.466353</td>
      <td>509.220100</td>
      <td>519.888913</td>
      <td>493.756581</td>
      <td>507.103392</td>
      <td>508.808409</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Africa Western and Central</td>
      <td>AFW</td>
      <td>GDP per capita (current US$)</td>
      <td>NY.GDP.PCAP.CD</td>
      <td>107.963779</td>
      <td>113.114697</td>
      <td>118.865837</td>
      <td>123.478967</td>
      <td>131.892939</td>
      <td>138.566819</td>
      <td>...</td>
      <td>1936.390962</td>
      <td>2123.392433</td>
      <td>2166.743309</td>
      <td>1886.248158</td>
      <td>1666.422406</td>
      <td>1606.978332</td>
      <td>1695.959215</td>
      <td>1772.339155</td>
      <td>1714.426800</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Angola</td>
      <td>AGO</td>
      <td>GDP per capita (current US$)</td>
      <td>NY.GDP.PCAP.CD</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>...</td>
      <td>5100.097027</td>
      <td>5254.881126</td>
      <td>5408.411700</td>
      <td>4166.979833</td>
      <td>3506.073128</td>
      <td>4095.810057</td>
      <td>3289.643995</td>
      <td>2809.626088</td>
      <td>1895.770869</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 66 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">gdp_cap_df</span> <span class="o">=</span> <span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Country Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Indicator Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Indicator Code&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Unnamed&#39;</span><span class="p">)]</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;Country Code&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span>
<span class="n">gdp_cap_df</span> <span class="o">=</span> <span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;gdp&#39;</span><span class="p">)</span>
<span class="n">gdp_cap_df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Country Code      
ABW           1986     6472.398709
              1987     7885.158927
              1988     9765.909207
              1989    11392.269150
              1990    12306.717679
Name: gdp, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Again data from 1960 untill recent that we can use, we merge this with our original medals data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_gdp_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">medals_country_df</span><span class="p">,</span> <span class="n">gdp_cap_df</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">),</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">medals_country_gdp_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
      <th>gdp</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1960 Summer</th>
      <th rowspan="4" valign="top">AUS</th>
      <th>Athletics</th>
      <td>1</td>
      <td>2</td>
      <td>1</td>
      <td>1960</td>
      <td>1807.785710</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>1960</td>
      <td>1807.785710</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1960</td>
      <td>1807.785710</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>4</td>
      <td>4</td>
      <td>3</td>
      <td>1960</td>
      <td>1807.785710</td>
    </tr>
    <tr>
      <th>AUT</th>
      <th>Rowing</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1960</td>
      <td>935.460427</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th>USA</th>
      <th>Wrestling</th>
      <td>2</td>
      <td>0</td>
      <td>1</td>
      <td>2016</td>
      <td>58021.400500</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">UZB</th>
      <th>Boxing</th>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>2016</td>
      <td>2567.799207</td>
    </tr>
    <tr>
      <th>Judo</th>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>2016</td>
      <td>2567.799207</td>
    </tr>
    <tr>
      <th>Weightlifting</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>2016</td>
      <td>2567.799207</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>2016</td>
      <td>2567.799207</td>
    </tr>
  </tbody>
</table>
<p>3459 rows × 5 columns</p>
</div></div></div>
</div>
<p>And again we recompute our metric, by dividing the amount of medals by the GDP, indicating not how many medals but how many medals per dollar of weight per person obtained</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_gdp_df</span> <span class="o">=</span> <span class="n">medals_country_gdp_df</span><span class="p">[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">medals_country_gdp_df</span><span class="o">.</span><span class="n">gdp</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="n">medals_country_gdp_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1960 Summer</th>
      <th rowspan="4" valign="top">AUS</th>
      <th>Athletics</th>
      <td>0.000553</td>
      <td>0.001106</td>
      <td>0.000553</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.001106</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>0.000553</td>
      <td>0.000553</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>0.002213</td>
      <td>0.002213</td>
      <td>0.001659</td>
    </tr>
    <tr>
      <th>AUT</th>
      <th>Rowing</th>
      <td>0.000000</td>
      <td>0.001069</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>...</th>
      <th>...</th>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th rowspan="5" valign="top">2016 Summer</th>
      <th>USA</th>
      <th>Wrestling</th>
      <td>0.000034</td>
      <td>0.000000</td>
      <td>0.000017</td>
    </tr>
    <tr>
      <th rowspan="4" valign="top">UZB</th>
      <th>Boxing</th>
      <td>0.001168</td>
      <td>0.000779</td>
      <td>0.000779</td>
    </tr>
    <tr>
      <th>Judo</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000779</td>
    </tr>
    <tr>
      <th>Weightlifting</th>
      <td>0.000389</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.001168</td>
    </tr>
  </tbody>
</table>
<p>3459 rows × 3 columns</p>
</div></div></div>
</div>
<p>In order to compare we calulcate again the total medal/wealth metric for each country</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_gdp_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CHN</th>
      <td>0.190328</td>
      <td>0.182633</td>
      <td>0.153561</td>
    </tr>
    <tr>
      <th>ETH</th>
      <td>0.082480</td>
      <td>0.019586</td>
      <td>0.040711</td>
    </tr>
    <tr>
      <th>KEN</th>
      <td>0.064936</td>
      <td>0.082503</td>
      <td>0.075461</td>
    </tr>
    <tr>
      <th>RUS</th>
      <td>0.048552</td>
      <td>0.040582</td>
      <td>0.041834</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>0.047245</td>
      <td>0.033450</td>
      <td>0.033275</td>
    </tr>
    <tr>
      <th>JPN</th>
      <td>0.041464</td>
      <td>0.025717</td>
      <td>0.034149</td>
    </tr>
    <tr>
      <th>ITA</th>
      <td>0.035705</td>
      <td>0.032462</td>
      <td>0.040074</td>
    </tr>
    <tr>
      <th>CUB</th>
      <td>0.030598</td>
      <td>0.021835</td>
      <td>0.027075</td>
    </tr>
    <tr>
      <th>TUR</th>
      <td>0.026663</td>
      <td>0.016649</td>
      <td>0.008150</td>
    </tr>
    <tr>
      <th>UKR</th>
      <td>0.026470</td>
      <td>0.027748</td>
      <td>0.044867</td>
    </tr>
    <tr>
      <th>PAK</th>
      <td>0.021715</td>
      <td>0.016054</td>
      <td>0.022192</td>
    </tr>
    <tr>
      <th>ROU</th>
      <td>0.017914</td>
      <td>0.020278</td>
      <td>0.021639</td>
    </tr>
    <tr>
      <th>IND</th>
      <td>0.013408</td>
      <td>0.015722</td>
      <td>0.028250</td>
    </tr>
    <tr>
      <th>GBR</th>
      <td>0.013026</td>
      <td>0.020645</td>
      <td>0.021438</td>
    </tr>
    <tr>
      <th>AUS</th>
      <td>0.012907</td>
      <td>0.013433</td>
      <td>0.015555</td>
    </tr>
    <tr>
      <th>KOR</th>
      <td>0.011429</td>
      <td>0.034608</td>
      <td>0.027044</td>
    </tr>
    <tr>
      <th>UZB</th>
      <td>0.010776</td>
      <td>0.008233</td>
      <td>0.015982</td>
    </tr>
    <tr>
      <th>FRA</th>
      <td>0.010533</td>
      <td>0.015412</td>
      <td>0.017983</td>
    </tr>
    <tr>
      <th>FIN</th>
      <td>0.009890</td>
      <td>0.012106</td>
      <td>0.013962</td>
    </tr>
    <tr>
      <th>NOR</th>
      <td>0.009418</td>
      <td>0.009189</td>
      <td>0.006486</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As expected China performs well, but also Etheopia again scores high together with Kenia, I’m assuming a lot of runners come from this region. Remarkable is that countries such as USA and Japan, which are known to have a high GDP are still performing outstanding.</p>
<p>Now that we have 3 versions of the same analysis it debatable which one is ‘more accurate’, I personally believe that good athlete’s depend more on the countries population than wealth, as talent will always emerge from a pool and GDP is not a great indicator if the country has the resources to support an athlete.</p>
<div class="section" id="medals-per-group-season-sport">
<h3><span class="section-number">37.5.1. </span>Medals per group (season, sport,…)<a class="headerlink" href="#medals-per-group-season-sport" title="Permalink to this headline">¶</a></h3>
<p>I mentioned earlier that Scandinavian countries are good at winter sports, let’s prove it, we divide our dataset in ‘Summer’ and ‘Winter’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span><span class="p">[</span><span class="s1">&#39;season&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">&#39;Games&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
<span class="n">medals_country_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
      <th>season</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>By grouping per season and country and counting the total amount of medals (here gold, silver or bronze does not matter) we get 2 values for each country. We first sum all types of medals, then group by season and country and last pivot the season feature to create columns for each season</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_season_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;season&#39;</span><span class="p">,</span> <span class="n">append</span><span class="o">=</span><span class="kc">True</span><span class="p">)[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;season&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
<span class="n">medals_season_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>season</th>
      <th>Summer</th>
      <th>Winter</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AFG</th>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>AHO</th>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ALG</th>
      <td>17.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ANZ</th>
      <td>11.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ARG</th>
      <td>74.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>VIE</th>
      <td>4.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>WIF</th>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>YUG</th>
      <td>83.0</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>ZAM</th>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ZIM</th>
      <td>8.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>149 rows × 2 columns</p>
</div></div></div>
</div>
<p>Using our contingengy table chi squared test we can easily find out if for certain rows the distribution of our 2 columns (Summer and Winter) is skewed.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">medals_season_df</span><span class="p">)</span>
<span class="n">F</span><span class="p">,</span> <span class="n">p</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2662.3291002167407, 0.0)
</pre></div>
</div>
</div>
</div>
<p>with a p-value of 0.0 we know there is a definite shift for certain countries, using the expected values we calculate the diff and sort it by descending order on summer</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_season_diff_df</span> <span class="o">=</span> <span class="n">medals_season_df</span><span class="o">-</span><span class="n">exp</span>
<span class="n">medals_season_diff_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Summer&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>season</th>
      <th>Summer</th>
      <th>Winter</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>GBR</th>
      <td>85.965542</td>
      <td>-85.965542</td>
    </tr>
    <tr>
      <th>USA</th>
      <td>68.575099</td>
      <td>-68.575099</td>
    </tr>
    <tr>
      <th>HUN</th>
      <td>62.780286</td>
      <td>-62.780286</td>
    </tr>
    <tr>
      <th>AUS</th>
      <td>56.924241</td>
      <td>-56.924241</td>
    </tr>
    <tr>
      <th>ROU</th>
      <td>39.753392</td>
      <td>-39.753392</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>SUI</th>
      <td>-78.671749</td>
      <td>78.671749</td>
    </tr>
    <tr>
      <th>FIN</th>
      <td>-82.659263</td>
      <td>82.659263</td>
    </tr>
    <tr>
      <th>CAN</th>
      <td>-90.223556</td>
      <td>90.223556</td>
    </tr>
    <tr>
      <th>AUT</th>
      <td>-133.247569</td>
      <td>133.247569</td>
    </tr>
    <tr>
      <th>NOR</th>
      <td>-193.088246</td>
      <td>193.088246</td>
    </tr>
  </tbody>
</table>
<p>149 rows × 2 columns</p>
</div></div></div>
</div>
<p>Although having bad weather, the british do not fancy some snow at all, similar for the United States.
In contrast, countries as Norway, Austria, Canada, Finland, Switzerland, … really excel in winter sports!</p>
<p>Similarly to this analysis we can to the same for countries and types of sports, we do the same manipulation and obtain the next view of our data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_sport_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s1">&#39;Sport&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">medals_sport_df</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">medals_sport_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)</span>
<span class="n">medals_sport_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_14702/611435394.py:1: FutureWarning: Dropping of nuisance columns in DataFrame reductions (with &#39;numeric_only=None&#39;) is deprecated; in a future version this will raise TypeError.  Select only valid columns before calling the reduction.
  medals_sport_df = medals_country_df.sum(axis=&#39;columns&#39;).unstack(&#39;Sport&#39;).groupby(&#39;NOC&#39;).sum()
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Sport</th>
      <th>Aeronautics</th>
      <th>Alpine Skiing</th>
      <th>Alpinism</th>
      <th>Archery</th>
      <th>Art Competitions</th>
      <th>Athletics</th>
      <th>Badminton</th>
      <th>Baseball</th>
      <th>Basketball</th>
      <th>Basque Pelota</th>
      <th>...</th>
      <th>Table Tennis</th>
      <th>Taekwondo</th>
      <th>Tennis</th>
      <th>Trampolining</th>
      <th>Triathlon</th>
      <th>Tug-Of-War</th>
      <th>Volleyball</th>
      <th>Water Polo</th>
      <th>Weightlifting</th>
      <th>Wrestling</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AFG</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>AHO</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ALG</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>9.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ANZ</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ARG</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>5.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>VIE</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>WIF</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>YUG</th>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>7.0</td>
      <td>0.0</td>
      <td>16.0</td>
    </tr>
    <tr>
      <th>ZAM</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>ZIM</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>149 rows × 66 columns</p>
</div></div></div>
</div>
<p>So instead of knowing which countries are performing different on summer and winter games, we can not figure out which sports are excelled by a nation.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">medals_sport_df</span><span class="p">)</span>
<span class="n">F</span><span class="p">,</span> <span class="n">p</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(44987.26611756852, 0.0)
</pre></div>
</div>
</div>
</div>
<p>Again a p-value of 0.0 indicate the correlation is not a coincidence, so we should investigate with the differences, as we have a lot of sports and countries, it would be wise to select a single country or sport.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_sport_diff_df</span> <span class="o">=</span> <span class="n">medals_sport_df</span><span class="o">-</span><span class="n">exp</span>
<span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;NED&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sport
Speed Skating       62.077260
Cycling             33.908452
Swimming            25.759395
Hockey              14.862949
Rowing              14.234062
Equestrianism       14.231480
Sailing             11.050366
Judo                10.992856
Art Competitions     3.047785
Football             1.774823
Name: NED, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>As you can see I took the Dutch which clearly have a favorite. Speed Skating and Hockey where 2 sports where I thought they would be scoring well, but they also perform well on cycling and swimming!</p>
<p>It also works the other way around if we select a sport and see which countries are good, I wanted to known which countries are good at sailing.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_sport_diff_df</span><span class="p">[</span><span class="s1">&#39;Sailing&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NOC
GBR    32.429944
DEN    23.764377
NZL    18.539080
SWE    16.605895
ESP    14.554508
Name: Sailing, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Looks like Great Britain is good at sailing, all those years of colonialism still seem to pay of…</p>
</div>
<div class="section" id="athlete-attributes">
<h3><span class="section-number">37.5.2. </span>Athlete attributes<a class="headerlink" href="#athlete-attributes" title="Permalink to this headline">¶</a></h3>
<p>In this section we will be looking at attributes from athletes, age, height and weight are all given in the dataset, yet with a lot of missing values. To make our life easier I created 2 functions that retrieves groups of athletes based on a grouping and the mean of each groups for the grouping, also you can set if we only take athletes that received a medal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">group_athletes</span><span class="p">(</span><span class="n">grouping</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Sex&#39;</span><span class="p">],</span> <span class="n">agg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">medals</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">])</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">medals</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">][[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">grouping</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">median_athletes</span><span class="p">(</span><span class="n">grouping</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Sex&#39;</span><span class="p">],</span> <span class="n">medals</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">medals</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="o">~</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">.</span><span class="n">isna</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">grouping</span><span class="p">)[[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>To give an example, here is the result of the mean for athletes grouped per gender. I want to remark here that I did not perform a non-normal test as a fact that I always know data such as this is not normal distributed. A mean is not the perfect indicator for this!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_athletes</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>F</th>
      <td>23.0</td>
      <td>168.0</td>
      <td>59.0</td>
    </tr>
    <tr>
      <th>M</th>
      <td>25.0</td>
      <td>179.0</td>
      <td>74.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now for each attribute we would like to perform an ANOVA with the initial values, we can do this with the scipy library, where we supply the data from the (in this case) 2 groups.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="o">*</span><span class="n">group_athletes</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;F: </span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;p: </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F: [ 2099.07936998 41302.70098716 44472.78629524]
p: [0. 0. 0.]
</pre></div>
</div>
</div>
</div>
<p>You can See that the p-values are all less that 0.05 indicating no chance this happend by accident, so there is a clear difference for Age, Height and Weight for Male and Female Athletes. Which was also visible in the earlier table we created, yet we know it is not by random coincidence.</p>
<p>How about we only take athletes that have obtained a medal? do we see a difference then?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="o">*</span><span class="n">group_athletes</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">],</span> <span class="n">medals</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;F: </span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;p: </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F: [ 162.38167465 5281.5001145  6522.92324657]
p: [4.62479657e-37 0.00000000e+00 0.00000000e+00]
</pre></div>
</div>
</div>
</div>
<p>Again the results are very clear, yet we can see that the F-Values are much lower, indicating the difference is much lower, let’s look at medians</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_athletes</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">],</span> <span class="n">medals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>F</th>
      <td>24.0</td>
      <td>170.0</td>
      <td>63.0</td>
    </tr>
    <tr>
      <th>M</th>
      <td>25.0</td>
      <td>181.0</td>
      <td>78.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Although no big differences most values have shifted upwards indicating being taller and heavier gives you more chance on a medal?</p>
<p>Instead of focussing on gender, let’s look at sports, as I assume not every sports prefers the same athlete.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="o">*</span><span class="n">group_athletes</span><span class="p">([</span><span class="s1">&#39;Sport&#39;</span><span class="p">],</span> <span class="n">medals</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;F: </span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;p: </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F: [ 94.89968089 172.60170532 106.28595443]
p: [0. 0. 0.]
</pre></div>
</div>
</div>
</div>
<p>F values are much less, yet we should not compare as we changed our grouping, the p-values as usually are so low there is no chance of randomness.</p>
<p>As we have too many sports, I decided to sort them by Height and only show the shortest.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_sport_df</span> <span class="o">=</span> <span class="n">median_athletes</span><span class="p">([</span><span class="s1">&#39;Sport&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">)</span>
<span class="n">median_sport_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Gymnastics</th>
      <td>21.0</td>
      <td>164.0</td>
      <td>58.0</td>
    </tr>
    <tr>
      <th>Diving</th>
      <td>22.0</td>
      <td>167.0</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>Trampolining</th>
      <td>24.0</td>
      <td>167.0</td>
      <td>58.0</td>
    </tr>
    <tr>
      <th>Figure Skating</th>
      <td>22.0</td>
      <td>168.0</td>
      <td>57.0</td>
    </tr>
    <tr>
      <th>Synchronized Swimming</th>
      <td>22.0</td>
      <td>168.0</td>
      <td>55.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Clearly there are some sports that favor being small, there are probably numerous arguments why that would be, but I’m not going to go there.</p>
<p>Now that we are here, let’s look at the sports with the heaviest athletes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_sport_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Tug-Of-War</th>
      <td>24.5</td>
      <td>183.5</td>
      <td>90.0</td>
    </tr>
    <tr>
      <th>Bobsleigh</th>
      <td>28.0</td>
      <td>182.0</td>
      <td>90.0</td>
    </tr>
    <tr>
      <th>Basketball</th>
      <td>25.0</td>
      <td>191.0</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>Baseball</th>
      <td>26.0</td>
      <td>183.0</td>
      <td>85.0</td>
    </tr>
    <tr>
      <th>Water Polo</th>
      <td>25.0</td>
      <td>185.0</td>
      <td>84.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Although not a sport anymore, Tug-Of-War still has the heaviest contestants, which indicates that weight sure is a way to win an old-fashioned tug of war.</p>
<p>To give it some more insight, we could divide each row with it’s mean, this would give a differential compared to the mean.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_sport_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">-</span><span class="n">x</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Gymnastics</th>
      <td>-4.464286</td>
      <td>-11.544643</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>Diving</th>
      <td>-3.464286</td>
      <td>-8.544643</td>
      <td>-11.0</td>
    </tr>
    <tr>
      <th>Trampolining</th>
      <td>-1.464286</td>
      <td>-8.544643</td>
      <td>-13.0</td>
    </tr>
    <tr>
      <th>Figure Skating</th>
      <td>-3.464286</td>
      <td>-7.544643</td>
      <td>-14.0</td>
    </tr>
    <tr>
      <th>Synchronized Swimming</th>
      <td>-3.464286</td>
      <td>-7.544643</td>
      <td>-16.0</td>
    </tr>
    <tr>
      <th>Weightlifting</th>
      <td>-0.464286</td>
      <td>-7.544643</td>
      <td>4.0</td>
    </tr>
    <tr>
      <th>Rhythmic Gymnastics</th>
      <td>-7.464286</td>
      <td>-7.544643</td>
      <td>-22.0</td>
    </tr>
    <tr>
      <th>Table Tennis</th>
      <td>0.535714</td>
      <td>-5.544643</td>
      <td>-7.0</td>
    </tr>
    <tr>
      <th>Softball</th>
      <td>0.535714</td>
      <td>-5.544643</td>
      <td>-5.0</td>
    </tr>
    <tr>
      <th>Short Track Speed Skating</th>
      <td>-2.464286</td>
      <td>-5.544643</td>
      <td>-8.0</td>
    </tr>
    <tr>
      <th>Freestyle Skiing</th>
      <td>-1.464286</td>
      <td>-5.544643</td>
      <td>-6.0</td>
    </tr>
    <tr>
      <th>Wrestling</th>
      <td>-0.464286</td>
      <td>-3.544643</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Archery</th>
      <td>-0.464286</td>
      <td>-3.544643</td>
      <td>-2.0</td>
    </tr>
    <tr>
      <th>Boxing</th>
      <td>-2.464286</td>
      <td>-3.544643</td>
      <td>-8.0</td>
    </tr>
    <tr>
      <th>Snowboarding</th>
      <td>-1.464286</td>
      <td>-2.544643</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>Hockey</th>
      <td>-0.464286</td>
      <td>-2.544643</td>
      <td>-2.0</td>
    </tr>
    <tr>
      <th>Triathlon</th>
      <td>2.535714</td>
      <td>-2.544643</td>
      <td>-10.0</td>
    </tr>
    <tr>
      <th>Golf</th>
      <td>3.035714</td>
      <td>-2.544643</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>Rugby</th>
      <td>-2.464286</td>
      <td>-2.544643</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>Alpine Skiing</th>
      <td>-2.464286</td>
      <td>-2.544643</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Cross Country Skiing</th>
      <td>0.535714</td>
      <td>-2.544643</td>
      <td>-5.0</td>
    </tr>
    <tr>
      <th>Shooting</th>
      <td>5.535714</td>
      <td>-1.544643</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Art Competitions</th>
      <td>16.535714</td>
      <td>-1.544643</td>
      <td>7.5</td>
    </tr>
    <tr>
      <th>Badminton</th>
      <td>0.535714</td>
      <td>-1.544643</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>Speed Skating</th>
      <td>-1.464286</td>
      <td>-1.544643</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>Biathlon</th>
      <td>0.535714</td>
      <td>-1.544643</td>
      <td>-4.0</td>
    </tr>
    <tr>
      <th>Rugby Sevens</th>
      <td>0.535714</td>
      <td>-1.544643</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Lacrosse</th>
      <td>2.535714</td>
      <td>-1.544643</td>
      <td>-4.5</td>
    </tr>
    <tr>
      <th>Equestrianism</th>
      <td>7.535714</td>
      <td>-1.544643</td>
      <td>-3.0</td>
    </tr>
    <tr>
      <th>Judo</th>
      <td>-0.464286</td>
      <td>-1.544643</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>Football</th>
      <td>-2.464286</td>
      <td>-0.544643</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Curling</th>
      <td>4.535714</td>
      <td>-0.544643</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Athletics</th>
      <td>-0.464286</td>
      <td>0.455357</td>
      <td>-4.0</td>
    </tr>
    <tr>
      <th>Taekwondo</th>
      <td>-1.464286</td>
      <td>0.455357</td>
      <td>-4.0</td>
    </tr>
    <tr>
      <th>Luge</th>
      <td>-1.464286</td>
      <td>1.455357</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Nordic Combined</th>
      <td>-1.464286</td>
      <td>1.455357</td>
      <td>-4.0</td>
    </tr>
    <tr>
      <th>Cycling</th>
      <td>-1.464286</td>
      <td>1.455357</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>Ski Jumping</th>
      <td>-2.464286</td>
      <td>1.455357</td>
      <td>-6.0</td>
    </tr>
    <tr>
      <th>Skeleton</th>
      <td>3.535714</td>
      <td>1.455357</td>
      <td>5.0</td>
    </tr>
    <tr>
      <th>Fencing</th>
      <td>0.535714</td>
      <td>2.455357</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>Modern Pentathlon</th>
      <td>0.535714</td>
      <td>2.455357</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>-5.464286</td>
      <td>3.455357</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>Canoeing</th>
      <td>-0.464286</td>
      <td>3.455357</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Sailing</th>
      <td>2.535714</td>
      <td>3.455357</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>Ice Hockey</th>
      <td>-0.464286</td>
      <td>4.455357</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>-0.464286</td>
      <td>4.455357</td>
      <td>-1.0</td>
    </tr>
    <tr>
      <th>Motorboating</th>
      <td>1.535714</td>
      <td>5.455357</td>
      <td>6.0</td>
    </tr>
    <tr>
      <th>Bobsleigh</th>
      <td>2.535714</td>
      <td>6.455357</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>Baseball</th>
      <td>0.535714</td>
      <td>7.455357</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>Tug-Of-War</th>
      <td>-0.964286</td>
      <td>7.955357</td>
      <td>19.0</td>
    </tr>
    <tr>
      <th>Handball</th>
      <td>0.535714</td>
      <td>8.455357</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>Rowing</th>
      <td>-0.464286</td>
      <td>9.455357</td>
      <td>11.0</td>
    </tr>
    <tr>
      <th>Water Polo</th>
      <td>-0.464286</td>
      <td>9.455357</td>
      <td>13.0</td>
    </tr>
    <tr>
      <th>Beach Volleyball</th>
      <td>3.535714</td>
      <td>10.455357</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>Volleyball</th>
      <td>-0.464286</td>
      <td>11.455357</td>
      <td>7.0</td>
    </tr>
    <tr>
      <th>Basketball</th>
      <td>-0.464286</td>
      <td>15.455357</td>
      <td>14.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This way you can see that the median basketball player is 15.5 cm taller than an average athlete.</p>
<p>Aside from grouping on 1 attribute (Gender or Sport) we can also combine them, but this makes things more complicated. Here we group on Gender and Sport type and only select medal wining athletes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sport_gender_df</span> <span class="o">=</span> <span class="n">median_athletes</span><span class="p">([</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">],</span> <span class="n">medals</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="s1">&#39;Sex&#39;</span><span class="p">)</span>
<span class="n">sport_gender_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }

    .dataframe thead tr:last-of-type th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="2" halign="left">Age</th>
      <th colspan="2" halign="left">Height</th>
      <th colspan="2" halign="left">Weight</th>
    </tr>
    <tr>
      <th>Sex</th>
      <th>F</th>
      <th>M</th>
      <th>F</th>
      <th>M</th>
      <th>F</th>
      <th>M</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Alpine Skiing</th>
      <td>24.0</td>
      <td>25.0</td>
      <td>169.0</td>
      <td>180.0</td>
      <td>64.0</td>
      <td>83.0</td>
    </tr>
    <tr>
      <th>Archery</th>
      <td>23.5</td>
      <td>24.0</td>
      <td>168.0</td>
      <td>180.0</td>
      <td>62.5</td>
      <td>76.0</td>
    </tr>
    <tr>
      <th>Athletics</th>
      <td>25.0</td>
      <td>24.0</td>
      <td>170.0</td>
      <td>182.0</td>
      <td>60.0</td>
      <td>74.0</td>
    </tr>
    <tr>
      <th>Badminton</th>
      <td>25.0</td>
      <td>26.0</td>
      <td>171.0</td>
      <td>180.0</td>
      <td>62.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>Basketball</th>
      <td>25.0</td>
      <td>25.0</td>
      <td>183.0</td>
      <td>198.0</td>
      <td>73.0</td>
      <td>94.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The options of comparison grow exponentially with every grouping level, therefore I selected one which I thought might be interesting, we are comparing per sport the height of males and females. so a negative value means females are higher than males.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">sport_gender_df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">sport_gender_df</span><span class="p">[</span><span class="s1">&#39;Height&#39;</span><span class="p">][</span><span class="s1">&#39;F&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;height_difference&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sport
Golf                         21.5
Figure Skating               17.0
Handball                     15.0
Basketball                   15.0
Volleyball                   15.0
Swimming                     14.0
Speed Skating                14.0
Water Polo                   13.0
Biathlon                     13.0
Triathlon                    13.0
Cross Country Skiing         13.0
Skeleton                     12.5
Ski Jumping                  12.5
Snowboarding                 12.0
Shooting                     12.0
Curling                      12.0
Judo                         12.0
Cycling                      12.0
Archery                      12.0
Trampolining                 12.0
Athletics                    12.0
Sailing                      12.0
Taekwondo                    11.5
Alpine Skiing                11.0
Rowing                       11.0
Rugby Sevens                 11.0
Ice Hockey                   11.0
Hockey                       11.0
Fencing                      11.0
Canoeing                     11.0
Bobsleigh                    10.0
Weightlifting                10.0
Freestyle Skiing             10.0
Tennis                       10.0
Table Tennis                  9.5
Diving                        9.0
Gymnastics                    9.0
Badminton                     9.0
Equestrianism                 9.0
Beach Volleyball              9.0
Wrestling                     8.0
Luge                          8.0
Football                      8.0
Short Track Speed Skating     8.0
Boxing                        7.0
Modern Pentathlon             6.0
Name: height_difference, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Here you can read that e.g. basketbalplayers in general have a taller height, yet difference between male and female is also 15cms so the height advantage is not that appearant in female basketball. On the other side, Boxing has a lower height difference, yet boxing already was a sport that benefits smaller athletes than average.</p>
<p>To end this section I would like to take a grouping where the difference is not that obvious, by grouping per medal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">F</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">f_oneway</span><span class="p">(</span><span class="o">*</span><span class="n">group_athletes</span><span class="p">([</span><span class="s1">&#39;Medal&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;F: </span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;p: </span><span class="si">{</span><span class="n">p</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>F: [0.39329622 6.66008411 5.73133235]
p: [0.67483359 0.00128364 0.00324762]
</pre></div>
</div>
</div>
</div>
<p>You can see that for age we have a p-value of 0.67, indicating no difference in age for athletes that have obtained different types of medals, yet for height and weight the p-value is significant.
However if we look at the median values we see nearly no difference.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_athletes</span><span class="p">([</span><span class="s1">&#39;Medal&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
    <tr>
      <th>Medal</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Bronze</th>
      <td>25.0</td>
      <td>178.0</td>
      <td>72.0</td>
    </tr>
    <tr>
      <th>Gold</th>
      <td>25.0</td>
      <td>178.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>Silver</th>
      <td>25.0</td>
      <td>178.0</td>
      <td>73.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This is a great example of how significance does not imply relevance, the differences here are so small they are irrelevant.</p>
</div>
</div>
<div class="section" id="visualization">
<h2><span class="section-number">37.6. </span>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<p>Before we start creating graphics, a little recall we started out with a view of our data for each games, NOC and sport the amount of medals</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th>Medal</th>
      <th>Gold</th>
      <th>Silver</th>
      <th>Bronze</th>
      <th>year</th>
      <th>season</th>
    </tr>
    <tr>
      <th>Games</th>
      <th>NOC</th>
      <th>Sport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">1896 Summer</th>
      <th rowspan="2" valign="top">AUS</th>
      <th>Athletics</th>
      <td>2</td>
      <td>0</td>
      <td>0</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>Tennis</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th rowspan="2" valign="top">AUT</th>
      <th>Cycling</th>
      <td>1</td>
      <td>0</td>
      <td>2</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>Swimming</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
    <tr>
      <th>DEN</th>
      <th>Fencing</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1896</td>
      <td>Summer</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>What I would be interested in is the evoluation of amount of medals for the highest achieving countries, therefore we need a list of the best countries, I selected the top 10 countries with most medals.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">most_medals</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span>
<span class="n">most_medals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;USA&#39;, &#39;URS&#39;, &#39;GER&#39;, &#39;GBR&#39;, &#39;FRA&#39;, &#39;ITA&#39;, &#39;SWE&#39;, &#39;RUS&#39;, &#39;CHN&#39;,
       &#39;AUS&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Now for those countries we create a new view on our data that contains the won medals for each of those countries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_wide_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;NOC&#39;</span><span class="p">])[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="n">medals_country_wide_df</span> <span class="o">=</span> <span class="n">medals_country_wide_df</span><span class="p">[</span><span class="n">most_medals</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">medals_country_wide_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>NOC</th>
      <th>USA</th>
      <th>URS</th>
      <th>GER</th>
      <th>GBR</th>
      <th>FRA</th>
      <th>ITA</th>
      <th>SWE</th>
      <th>RUS</th>
      <th>CHN</th>
      <th>AUS</th>
    </tr>
    <tr>
      <th>year</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2008</th>
      <td>92.0</td>
      <td>0.0</td>
      <td>39.0</td>
      <td>42.0</td>
      <td>38.0</td>
      <td>26.0</td>
      <td>5.0</td>
      <td>66.0</td>
      <td>85.0</td>
      <td>44.0</td>
    </tr>
    <tr>
      <th>2010</th>
      <td>29.0</td>
      <td>0.0</td>
      <td>25.0</td>
      <td>1.0</td>
      <td>11.0</td>
      <td>5.0</td>
      <td>10.0</td>
      <td>14.0</td>
      <td>9.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2012</th>
      <td>91.0</td>
      <td>0.0</td>
      <td>41.0</td>
      <td>60.0</td>
      <td>34.0</td>
      <td>26.0</td>
      <td>8.0</td>
      <td>77.0</td>
      <td>74.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>2014</th>
      <td>23.0</td>
      <td>0.0</td>
      <td>17.0</td>
      <td>4.0</td>
      <td>11.0</td>
      <td>8.0</td>
      <td>13.0</td>
      <td>29.0</td>
      <td>9.0</td>
      <td>3.0</td>
    </tr>
    <tr>
      <th>2016</th>
      <td>107.0</td>
      <td>0.0</td>
      <td>40.0</td>
      <td>63.0</td>
      <td>42.0</td>
      <td>26.0</td>
      <td>11.0</td>
      <td>54.0</td>
      <td>61.0</td>
      <td>29.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can create a simple line plot for this, where the x-axis is the chronological years of each games and y is the amount of medals</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">medals_country_wide_df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_133_0.png" src="../_images/Olympics_133_0.png" />
</div>
</div>
<p>Looks like we forgot something, we are plotting the amount of medals per year and not cumulative, fortunately a builtin method can solve this</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">medals_country_wide_df</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_135_0.png" src="../_images/Olympics_135_0.png" />
</div>
</div>
<p>I did the same for the population corrected data, creating a line plot, this is in my opinion more interesting as it gives a more honest take on the competition.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">most_medals_pop</span> <span class="o">=</span> <span class="n">medals_pop_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NOC&#39;</span><span class="p">)[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span>
<span class="n">medals_pop_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_pop_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="s1">&#39;Games&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">)</span>
<span class="n">medals_country_wide_pop_df</span> <span class="o">=</span> <span class="n">medals_pop_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;NOC&#39;</span><span class="p">])[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span>
<span class="n">medals_country_wide_pop_df</span> <span class="o">=</span> <span class="n">medals_country_wide_pop_df</span><span class="p">[</span><span class="n">most_medals_pop</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">medals_country_wide_pop_df</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_137_0.png" src="../_images/Olympics_137_0.png" />
</div>
</div>
<p>There seems to have been a golden age for Liechtenstein, as they are taking up a lot of space I opted to remove them and plot again</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">lineplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">medals_country_wide_pop_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LIE&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">cumsum</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_139_0.png" src="../_images/Olympics_139_0.png" />
</div>
</div>
<p>Great! a lot of other interesting countries performances, note that CHI stands for Chile which catches up phenomenally.</p>
<p>Another take would be a pie chart, although not my favorite it would make a good option in this situation, as we want to compare the relative portions of countries. When we use the regular data we obtain the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75f21af0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_141_1.png" src="../_images/Olympics_141_1.png" />
</div>
</div>
<p>Verry messy, as most countries are not visible on the pie chart, a good option would be to only take the top 20 countries and put the others in a ‘other’ category.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_country_vis_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">19</span><span class="p">]</span>
<span class="n">medals_country_vis_df</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">19</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">medals_country_vis_df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75cff940&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_143_1.png" src="../_images/Olympics_143_1.png" />
</div>
</div>
<p>Much better, with this pie plot we can see that 10 countries obtained about half of all medals and the next 10 have about 25%, the other 130 countries are in the botton quarter.</p>
<p>Now to add more depth we can divide our dataset, something we mentioned earlier is the dominance in winter sports, here we create the same pie chart but only take events from winter games.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_winter_df</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="p">[</span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">season</span><span class="o">==</span><span class="s1">&#39;Winter&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">19</span><span class="p">]</span>
<span class="n">medals_winter_df</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="p">[</span><span class="n">medals_country_df</span><span class="o">.</span><span class="n">season</span><span class="o">==</span><span class="s1">&#39;Winter&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">19</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">medals_winter_df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75c709d0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_145_1.png" src="../_images/Olympics_145_1.png" />
</div>
</div>
<p>You can compare them and see that some countries fall and some rise, indicating that countries definitely have a preference.</p>
<p>Again we can do the same with population corrected data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_pop_vis_df</span> <span class="o">=</span> <span class="n">medals_pop_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">19</span><span class="p">]</span>
<span class="n">medals_pop_vis_df</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_pop_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">19</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">(</span><span class="n">medals_pop_vis_df</span><span class="o">*</span><span class="mi">1200</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75bef760&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_147_1.png" src="../_images/Olympics_147_1.png" />
</div>
</div>
<p>Or GDP corrected data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_gdp_vis_df</span> <span class="o">=</span> <span class="n">medals_country_gdp_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">19</span><span class="p">]</span>
<span class="n">medals_gdp_vis_df</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">medals_country_gdp_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;NOC&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()[[</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span><span class="s1">&#39;Bronze&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">19</span><span class="p">:]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">medals_gdp_vis_df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pie</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75b6e1f0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_149_1.png" src="../_images/Olympics_149_1.png" />
</div>
</div>
<div class="section" id="best-performing-per-sport">
<h3><span class="section-number">37.6.1. </span>best performing per sport<a class="headerlink" href="#best-performing-per-sport" title="Permalink to this headline">¶</a></h3>
<p>To visualise the best performing country per sport we first need the country that won the most medals per sport. we do this with the following code</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">best_country_sport_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;Sport&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()[</span><span class="mi">0</span><span class="p">]),</span>
        <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NOC&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;Sport&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;medals&#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">best_country_sport_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>country</th>
      <th>medals</th>
    </tr>
    <tr>
      <th>Sport</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Aeronautics</th>
      <td>SUI</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Alpine Skiing</th>
      <td>AUT</td>
      <td>80</td>
    </tr>
    <tr>
      <th>Alpinism</th>
      <td>AUS</td>
      <td>1</td>
    </tr>
    <tr>
      <th>Archery</th>
      <td>KOR</td>
      <td>30</td>
    </tr>
    <tr>
      <th>Art Competitions</th>
      <td>GER</td>
      <td>20</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>As there are to many sports, I opted to only visualise the top 20 most popular sports, by the amount of medals</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_medals_sport</span> <span class="o">=</span> <span class="n">medals_country_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="s1">&#39;Sport&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s1">&#39;medals&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">popular_sports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">total_medals_sport</span><span class="o">.</span><span class="n">Sport</span><span class="p">)</span>
<span class="n">best_country_sport_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">popular_sports</span><span class="p">]</span><span class="o">.</span><span class="n">medals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sport
Athletics               521
Swimming                404
Wrestling               116
Boxing                  100
Gymnastics              118
Rowing                   81
Shooting                 94
Cycling                  84
Canoeing                 80
Weightlifting            55
Fencing                 105
Judo                     84
Sailing                  58
Speed Skating            71
Equestrianism            59
Cross Country Skiing     83
Alpine Skiing            80
Diving                   73
Figure Skating           41
Biathlon                 38
Name: medals, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Now we can create a bar plot, where the portion of each best performing country is shown together with the region name.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">total_medals_sport</span><span class="o">.</span><span class="n">Sport</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">total_medals_sport</span><span class="o">.</span><span class="n">medals</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">popular_sports</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">best_country_sport_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">popular_sports</span><span class="p">]</span><span class="o">.</span><span class="n">medals</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">sport</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">popular_sports</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">best_country_sport_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sport</span><span class="p">]</span><span class="o">.</span><span class="n">medals</span><span class="o">+</span><span class="mi">10</span><span class="p">,</span> <span class="n">best_country_sport_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">sport</span><span class="p">]</span><span class="o">.</span><span class="n">country</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;medium&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_155_0.png" src="../_images/Olympics_155_0.png" />
</div>
</div>
<p>This both indicates the popularity of the sport (by amount of total medals) and the amount of medals won by the best performing country.</p>
<p>Another approach would be to use the difference between truth and expected values, we calculated the difference earlier.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Sport</th>
      <th>Aeronautics</th>
      <th>Alpine Skiing</th>
      <th>Alpinism</th>
      <th>Archery</th>
      <th>Art Competitions</th>
      <th>Athletics</th>
      <th>Badminton</th>
      <th>Baseball</th>
      <th>Basketball</th>
      <th>Basque Pelota</th>
      <th>...</th>
      <th>Table Tennis</th>
      <th>Taekwondo</th>
      <th>Tennis</th>
      <th>Trampolining</th>
      <th>Triathlon</th>
      <th>Tug-Of-War</th>
      <th>Volleyball</th>
      <th>Water Polo</th>
      <th>Weightlifting</th>
      <th>Wrestling</th>
    </tr>
    <tr>
      <th>NOC</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>AFG</th>
      <td>-0.000120</td>
      <td>-0.042382</td>
      <td>-0.000720</td>
      <td>-0.017649</td>
      <td>-0.016088</td>
      <td>-0.295714</td>
      <td>-0.009845</td>
      <td>-0.001801</td>
      <td>-0.010806</td>
      <td>-0.000120</td>
      <td>...</td>
      <td>-0.009125</td>
      <td>1.982711</td>
      <td>-0.022212</td>
      <td>-0.003122</td>
      <td>-0.003002</td>
      <td>-0.001801</td>
      <td>-0.010085</td>
      <td>-0.011406</td>
      <td>-0.070477</td>
      <td>-0.151039</td>
    </tr>
    <tr>
      <th>AHO</th>
      <td>-0.000060</td>
      <td>-0.021191</td>
      <td>-0.000360</td>
      <td>-0.008825</td>
      <td>-0.008044</td>
      <td>-0.147857</td>
      <td>-0.004923</td>
      <td>-0.000900</td>
      <td>-0.005403</td>
      <td>-0.000060</td>
      <td>...</td>
      <td>-0.004562</td>
      <td>-0.008644</td>
      <td>-0.011106</td>
      <td>-0.001561</td>
      <td>-0.001501</td>
      <td>-0.000900</td>
      <td>-0.005043</td>
      <td>-0.005703</td>
      <td>-0.035238</td>
      <td>-0.075519</td>
    </tr>
    <tr>
      <th>ALG</th>
      <td>-0.001021</td>
      <td>-0.360247</td>
      <td>-0.006123</td>
      <td>-0.150018</td>
      <td>-0.136751</td>
      <td>6.486433</td>
      <td>-0.083684</td>
      <td>-0.015308</td>
      <td>-0.091848</td>
      <td>-0.001021</td>
      <td>...</td>
      <td>-0.077560</td>
      <td>-0.146956</td>
      <td>-0.188798</td>
      <td>-0.026534</td>
      <td>-0.025513</td>
      <td>-0.015308</td>
      <td>-0.085725</td>
      <td>-0.096950</td>
      <td>-0.599052</td>
      <td>-1.283828</td>
    </tr>
    <tr>
      <th>ANZ</th>
      <td>-0.000660</td>
      <td>-0.233101</td>
      <td>-0.003962</td>
      <td>-0.097070</td>
      <td>-0.088486</td>
      <td>-0.626426</td>
      <td>-0.054148</td>
      <td>-0.009905</td>
      <td>-0.059431</td>
      <td>-0.000660</td>
      <td>...</td>
      <td>-0.050186</td>
      <td>-0.095089</td>
      <td>0.877836</td>
      <td>-0.017169</td>
      <td>-0.016509</td>
      <td>-0.009905</td>
      <td>-0.055469</td>
      <td>-0.062733</td>
      <td>-0.387622</td>
      <td>-0.830712</td>
    </tr>
    <tr>
      <th>ARG</th>
      <td>-0.004442</td>
      <td>-1.568135</td>
      <td>-0.026654</td>
      <td>-0.653020</td>
      <td>-0.595270</td>
      <td>-5.941410</td>
      <td>-0.364269</td>
      <td>-0.066635</td>
      <td>1.600192</td>
      <td>-0.004442</td>
      <td>...</td>
      <td>-0.337616</td>
      <td>0.360307</td>
      <td>4.178173</td>
      <td>-0.115500</td>
      <td>-0.111058</td>
      <td>-0.066635</td>
      <td>0.626846</td>
      <td>-0.422019</td>
      <td>-0.607636</td>
      <td>-5.588426</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 66 columns</p>
</div></div></div>
</div>
<p>By sorting on the values in this matrix, we find the combination of region and sport that are most extreme, meaning either much more medals then expected, or much less medals than expected.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_diff_df</span> <span class="o">=</span> <span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">stack</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">medals_diff_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NOC  Sport    
USA  Swimming     224.472926
     Athletics    209.169828
AUS  Swimming     132.374235
ITA  Fencing       82.005643
GBR  Athletics     78.193060
dtype: float64
</pre></div>
</div>
</div>
</div>
<p>So now we know that USA has aboutn 224 more medals in Swimming than expected, we could put this in a bar chart</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">medals_diff_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="n">y</span><span class="o">=</span><span class="n">medals_diff_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_161_0.png" src="../_images/Olympics_161_0.png" />
</div>
</div>
<p>This reveals that USA seems to be investing a lot in Swimming or Athletics sports, which are by coincidence sports that have the most medals.
You could argue that due to the cold war show-off they have fallen prey to the cobra effect where they used the amount of medals they could get as a target instead of a measure of performance, shifting them towards sports where more medals can be obtained.</p>
<p>Anyway, the same analysis can be done for the worst combinations.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">medals_diff_df</span><span class="o">.</span><span class="n">tail</span><span class="p">(),</span> <span class="n">y</span><span class="o">=</span><span class="n">medals_diff_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Olympics_163_0.png" src="../_images/Olympics_163_0.png" />
</div>
</div>
<p>This analysis can also be performed on Country level, here we see that Belgium is good at</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;BEL&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sport
Aeronautics         -0.009425
Alpine Skiing       -3.326990
Alpinism            -0.056549
Archery             14.614540
Art Competitions     4.737063
                      ...    
Tug-Of-War           0.858626
Volleyball          -0.791692
Water Polo           5.104634
Weightlifting       -2.532417
Wrestling           -7.856525
Name: BEL, Length: 66, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>And we can put this in the same type of barchart to make it comparible with the previous chart</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;BEL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">y</span><span class="o">=</span><span class="n">medals_sport_diff_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;BEL&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba766ca1c0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_167_1.png" src="../_images/Olympics_167_1.png" />
</div>
</div>
</div>
<div class="section" id="id1">
<h3><span class="section-number">37.6.2. </span>Athlete attributes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>We also investigated athlete specific attributes, to refresh our memory a printout of how the dataset looks</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">athlete_events</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;NOC&#39;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">])[[</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="s1">&#39;Sport&#39;</span><span class="p">,</span> <span class="s1">&#39;Medal&#39;</span><span class="p">,</span> <span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="s1">&#39;Weight&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Sex</th>
      <th>Sport</th>
      <th>Medal</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>M</td>
      <td>Basketball</td>
      <td>NaN</td>
      <td>24.0</td>
      <td>180.0</td>
      <td>80.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>M</td>
      <td>Judo</td>
      <td>NaN</td>
      <td>23.0</td>
      <td>170.0</td>
      <td>60.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>F</td>
      <td>Speed Skating</td>
      <td>NaN</td>
      <td>21.0</td>
      <td>185.0</td>
      <td>82.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>F</td>
      <td>Speed Skating</td>
      <td>NaN</td>
      <td>25.0</td>
      <td>185.0</td>
      <td>82.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>F</td>
      <td>Speed Skating</td>
      <td>NaN</td>
      <td>27.0</td>
      <td>185.0</td>
      <td>82.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>I kept features such as gender, Sport, … as these were attributes on which the physical appearance was different, we can use these features to group our athletes and visualise the distribution with a histogram.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/lib/python3/dist-packages/matplotlib/cbook/__init__.py:1402: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  ndim = x[:, None].ndim
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:276: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  x = x[:, np.newaxis]
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:278: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  y = y[:, np.newaxis]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75833190&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_171_2.png" src="../_images/Olympics_171_2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Sex&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/lib/python3/dist-packages/matplotlib/cbook/__init__.py:1402: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  ndim = x[:, None].ndim
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:276: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  x = x[:, np.newaxis]
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:278: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  y = y[:, np.newaxis]
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75824820&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_172_2.png" src="../_images/Olympics_172_2.png" />
</div>
</div>
<p>For gender, the difference in age is not that appearent, yet the shift in height is, women are in general less tall as men.</p>
<p>When grouping per sport we saw significant differences.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">kdeplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Age&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Sport&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/home/lorenzf/.local/lib/python3.8/site-packages/seaborn/distributions.py:316: UserWarning: Dataset has 0 variance; skipping density estimate. Pass `warn_singular=False` to disable this warning.
  warnings.warn(msg, UserWarning)
/usr/lib/python3/dist-packages/matplotlib/cbook/__init__.py:1402: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  ndim = x[:, None].ndim
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:276: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  x = x[:, np.newaxis]
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:278: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  y = y[:, np.newaxis]
No handles with labels found to put in legend.
</pre></div>
</div>
<img alt="../_images/Olympics_174_1.png" src="../_images/Olympics_174_1.png" />
</div>
</div>
<p>If we put all sports like this in a distribution plot, it becomes a big mess, I had to remove the legend as there are a lot of sports and the bins all overlap. It seems not a good idea to make such a plot.</p>
<p>For medals we only have 3 different groups.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s1">&#39;Medal&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/usr/lib/python3/dist-packages/matplotlib/cbook/__init__.py:1402: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  ndim = x[:, None].ndim
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:276: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  x = x[:, np.newaxis]
/usr/lib/python3/dist-packages/matplotlib/axes/_base.py:278: FutureWarning: Support for multi-dimensional indexing (e.g. `obj[:, None]`) is deprecated and will be removed in a future version.  Convert to a numpy array before indexing instead.
  y = y[:, np.newaxis]
</pre></div>
</div>
<img alt="../_images/Olympics_176_1.png" src="../_images/Olympics_176_1.png" />
</div>
</div>
<p>Obviously for each ceremony we have 1 gold, 1 silver and 1 bronze, so distributions are equal in size.
We saw erlier that the groups do not have significant differences and this is confirmed with the histogram, although you can see some small differences that perhaps show a pattern?</p>
<p>Lastly I would like to add another dimension to the plots by using scatterplots, it will be messy but creates a new perspective.
For the scatter plot I would first plot all athlete’s height and weight (you could add lines of equal BMI here) and superpose in other colors subgroups of athletes based on groups.
Here I use the sport to show all athletes, gymnastics and weightlifting.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Sport</span><span class="o">==</span><span class="s1">&#39;Gymnastics&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gymnastics&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Sport</span><span class="o">==</span><span class="s1">&#39;Weightlifting&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Weightlifting&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba75061fd0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_178_1.png" src="../_images/Olympics_178_1.png" />
</div>
</div>
<p>you can clearly see how gymnastics are the smallest athletes and whilst weightlifting are also fairly small, they have a much higher weight, as they need muscles to perform their sport.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">.</span><span class="n">isna</span><span class="p">()],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">==</span><span class="s1">&#39;Bronze&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Bronze&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">==</span><span class="s1">&#39;Silver&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Silver&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Medal</span><span class="o">==</span><span class="s1">&#39;Gold&#39;</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;Weight&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;Height&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Gold&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.axes._subplots.AxesSubplot at 0x7fba74f313d0&gt;
</pre></div>
</div>
<img alt="../_images/Olympics_180_1.png" src="../_images/Olympics_180_1.png" />
</div>
</div>
<p>Looking at this graph we can see that while there is no difference for athlete that achieves different types of medals, there is a clear area in which you should be in order to be a medal winner, outside that area clearly dimishishes your chances.</p>
<p>Also there seems to be an athlete that is more than 200kgs?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">athlete_events</span><span class="p">[</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Weight</span><span class="o">==</span><span class="n">athlete_events</span><span class="o">.</span><span class="n">Weight</span><span class="o">.</span><span class="n">max</span><span class="p">()]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>Sex</th>
      <th>Age</th>
      <th>Height</th>
      <th>Weight</th>
      <th>Team</th>
      <th>NOC</th>
      <th>Games</th>
      <th>Year</th>
      <th>Season</th>
      <th>City</th>
      <th>Sport</th>
      <th>Event</th>
      <th>Medal</th>
    </tr>
    <tr>
      <th>ID</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>12177</th>
      <td>Ricardo Blas, Jr.</td>
      <td>M</td>
      <td>21.0</td>
      <td>183.0</td>
      <td>214.0</td>
      <td>Guam</td>
      <td>GUM</td>
      <td>2008 Summer</td>
      <td>2008</td>
      <td>Summer</td>
      <td>Beijing</td>
      <td>Judo</td>
      <td>Judo Men's Heavyweight</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>12177</th>
      <td>Ricardo Blas, Jr.</td>
      <td>M</td>
      <td>25.0</td>
      <td>183.0</td>
      <td>214.0</td>
      <td>Guam</td>
      <td>GUM</td>
      <td>2012 Summer</td>
      <td>2012</td>
      <td>Summer</td>
      <td>London</td>
      <td>Judo</td>
      <td>Judo Men's Heavyweight</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="summary">
<h2><span class="section-number">37.7. </span>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Best performing depends on metric</p></li>
<li><p>Some countries focus on different sports due to multiple reasons (# medals, heritage, …)</p></li>
<li><p>Your sport and physical attributes are related, there is a ideal weight and height</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./c7_case_studies"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            



<div class='prev-next-bottom'>
    
    <div id="prev">
        <a class="left-prev" href="Churn.html" title="previous page">
            <i class="prevnext-label fas fa-angle-left"></i>
            <div class="prevnext-info">
                <p class="prevnext-label">previous</p>
                <p class="prevnext-title"><span class="section-number">36. </span>Case Study: Churn</p>
            </div>
        </a>
    </div>
     <div id="next">
        <a class="right-next" href="UserSurvey.html" title="next page">
            <div class="prevnext-info">
                <p class="prevnext-label">next</p>
                <p class="prevnext-title"><span class="section-number">38. </span>Case Study: User survey</p>
            </div>
            <i class="prevnext-label fas fa-angle-right"></i>
        </a>
     </div>

</div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Lorenz Feyen<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>